/*! For license information please see pay.js.LICENSE.txt */
(()=>{var t={339:t=>{"use strict";t.exports=function(t){return t&&t[0]}},867:t=>{"use strict";t.exports=function(t){return t&&t.length}},907:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===e&&(e=[]);for(var n=e.length,o=new Array(n),r=0;r<n;r++)o[r]=t(e[r],r,e);return o}))},952:(t,e,n)=>{"use strict";var o=n(579),r=n(673),i=n(907),a=n(96),s=n(292);t.exports=function t(e){switch(o(e)){case"Object":if(s(e)||a(e))break;return r(t,e);case"Array":return i(t,e);case"Date":return new Date(e.valueOf());case"RegExp":return n=e,new RegExp(n.source,(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":"")+(n.unicode?"u":""))}var n;return e}},476:t=>{"use strict";t.exports=function(t,e){return function n(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return r.length>=t?e.apply(this,r):function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return n.apply(this,r.concat(e))}}}},970:t=>{"use strict";t.exports=function(){}},688:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){var n,o;return function(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var u=Date.now(),c=n+t-u;n&&c>0?(clearTimeout(o),o=setTimeout((function(){n=u,e.apply(r,a)}),c)):(n=u,e.apply(this,a))}}))},292:(t,e,n)=>{"use strict";var o,r=n(235);try{o=n(986).isValidElementType}catch(t){}o||(o=function(t){return"string"==typeof t||"function"==typeof t||!!t&&r("$$typeof",t)}),t.exports=o},96:(t,e,n)=>{"use strict";var o,r=n(235);try{o=n(986).isElement}catch(t){}o||(o=function(t){return!!t&&r("$$typeof",t)}),t.exports=o},337:t=>{"use strict";t.exports=function(t){return"string"==typeof t||t instanceof String}},235:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}))},673:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===e&&(e={});var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=t(e[o],o,e));return n}))},843:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});for(var n=e,o=0;o<t.length;o++){if(null==n)return;n=n[t[o]]}return n}))},974:(t,e,n)=>{"use strict";var o=n(476),r=n(843);t.exports=o(3,(function(t,e,n){void 0===t&&(t=[]),void 0===n&&(n={});var o=r(t,n);return null!=o?o:e}))},401:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){return null!=e?e[t]:void 0}))},477:(t,e,n)=>{"use strict";var o=n(476),r=n(401);t.exports=o(3,(function(t,e,n){var o=r(t,n);return null!=o?o:e}))},296:(t,e,n)=>{"use strict";var o=n(782);t.exports=function(t){return o(t).join("_").toLowerCase()}},267:t=>{"use strict";t.exports=function(t){return void 0===t&&(t=""),t.toLowerCase()}},15:t=>{"use strict";t.exports=function(t){return void 0===t&&(t=""),t.toUpperCase()}},782:t=>{"use strict";var e=/([a-z])([A-Z])/g,n=/[^a-zA-Z]+/g;t.exports=function(t){return t.replace(e,(function(t,e,n){return e+" "+n})).split(n)}},579:t=>{"use strict";t.exports=function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}},979:(t,e)=>{"use strict";var n,o=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function v(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case o:switch(t=t.type){case i:case s:case a:case h:case f:return t;default:switch(t=t&&t.$$typeof){case d:case c:case l:case p:case m:case u:return t;default:return e}}case r:return e}}}n=Symbol.for("react.module.reference"),e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===s||t===a||t===h||t===f||t===y||"object"==typeof t&&null!==t&&(t.$$typeof===p||t.$$typeof===m||t.$$typeof===u||t.$$typeof===c||t.$$typeof===l||t.$$typeof===n||void 0!==t.getModuleId)}},986:(t,e,n)=>{"use strict";t.exports=n(979)},157:(t,e,n)=>{var o=n(54).default;function r(){"use strict";t.exports=r=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",d=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,n){return t[e]=n}}function f(t,e,n,o){var r=e&&e.prototype instanceof w?e:w,i=Object.create(r.prototype),a=new W(o||[]);return s(i,"_invoke",{value:B(t,n,a)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var p="suspendedStart",y="suspendedYield",v="executing",g="completed",b={};function w(){}function k(){}function S(){}var C={};h(C,c,(function(){return this}));var x=Object.getPrototypeOf,P=x&&x(x(_([])));P&&P!==i&&a.call(P,c)&&(C=P);var M=S.prototype=w.prototype=Object.create(C);function E(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(r,i,s,u){var c=m(t[r],t,i);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==o(l)&&a.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(l).then((function(t){d.value=t,s(d)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var r;s(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}})}function B(t,n,o){var r=p;return function(i,a){if(r===v)throw Error("Generator is already running");if(r===g){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===b)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===p)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=v;var c=m(t,n,o);if("normal"===c.type){if(r=o.done?g:y,c.arg===b)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=g,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),b;var i=m(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function W(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return k.prototype=S,s(M,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:k,configurable:!0}),k.displayName=h(S,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,h(t,l,"GeneratorFunction")),t.prototype=Object.create(M),t},n.awrap=function(t){return{__await:t}},E(I.prototype),h(I.prototype,d,(function(){return this})),n.AsyncIterator=I,n.async=function(t,e,o,r,i){void 0===i&&(i=Promise);var a=new I(f(t,e,o,r),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(M),h(M,l,"Generator"),h(M,c,(function(){return this})),h(M,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},n.values=_,W.prototype={constructor:W,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;R(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:_(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),b}},n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},54:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},998:(t,e,n)=>{var o=n(157)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="/web/sdk/v1/",(()=>{"use strict";function t(t,e){if(null==t)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.includes(o))continue;n[o]=t[o]}return n}var e=["url","reqid"],o={url:"https://pay.yandex.ru",reqid:""};function r(n){void 0===n&&(n={});var r=n,i=r.url,a=void 0===i?o.url:i,s=r.reqid,u=void 0===s?o.reqid:s,c=t(r,e);return o=Object.assign(o,{url:a,reqid:u}),c}var i,a=5,s=500,u=[];function c(){if(o.url&&0!==u.length){var t=u.join("\r\n");u=[],i=null;var e=o.url+"/cl/click";if(!(Boolean(navigator.sendBeacon)&&navigator.sendBeacon(e,t))){var n=new XMLHttpRequest;n.open("POST",e),n.send(t)}}}function d(){i&&clearTimeout(i),c()}function l(t,e,n){i&&clearTimeout(i);var r,d=function(t,e,n,o){return[t?"/reqid="+t:"",o&&o.length?"/"+o.join("/"):"",e?"/path="+e:"",n?"/vars="+n:"","/cts="+Date.now(),"/*"].join("")}(o.reqid,t,(r=e,Object.entries(r).reduce((function(t,e){var n=e[0],o=e[1];return!o&&0!==o||"string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o||t.push(n+"="+encodeURIComponent(o).replace(/\*/g,"%2A")),t}),new Array).join(",")),n);u.push(d),u.length<a?i=setTimeout(c,s):c()}window.addEventListener("beforeunload",d),window.addEventListener("unload",d),window.addEventListener("blur",d);var h=function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e+"="+t[e])})).join(";")};function f(){try{return document.createEvent("TouchEvent"),"touch"}catch(t){return"desktop"}}var m=["experiments","testIds","boxes"],p={env:"production",initTimestamp:0,page:"",project:"pay",platform:f(),version:"0.0.0",sessionId:"",merchantId:"",experiments:"",sheetEnv:"",testIds:""};function y(e){var n=e.experiments,o=e.testIds,i=e.boxes,a=t(e,m);n&&(a.experiments=h(n)),i?a.testIds=i:o&&o.length&&(a.testIds=o.map(encodeURIComponent).join(";")),p=Object.assign({},p,r(a))}function v(t){return void 0===t&&(t={}),{rum_id:"ru."+p.project+"."+p.platform,"-version":p.version,"-env":p.env,"-project":p.project,"-page":p.page,"-platform":p.platform,"-additional":JSON.stringify(Object.assign({sessionId:p.sessionId,merchantId:p.merchantId||p.sessionId.split(".")[0],env:p.sheetEnv},t))}}function g(){var t=[];return p.experiments&&t.push("experiments="+p.experiments),p.testIds&&t.push("slots="+p.testIds),t}function b(t,e){try{return JSON.parse(t)}catch(t){return e}}var w,k=function(){function t(t){this.adapter=t,this.enabled=void 0;var e=String(Date.now());this.setItem(e,e);var n=this.getItem(e);this.removeItem(e),this.enabled=e===n}var e=t.prototype;return e.setObj=function(t,e){return this.setItem(t,JSON.stringify(e))},e.getObj=function(t,e){void 0===e&&(e=null);var n=this.getItem(t);return n?b(n,e):e},e.setItem=function(t,e){try{this.adapter.setItem(t,e)}catch(t){}},e.getItem=function(t){try{return this.adapter.getItem(t)}catch(t){return null}},e.removeItem=function(t){try{return this.adapter.removeItem(t)}catch(t){return}},t}();new k(window.sessionStorage);try{w=new k(window.localStorage)}catch(t){w=new k(window.sessionStorage)}var S=w,C=function(t){return void 0===t&&(t=5),Math.random().toString(16).slice(2,2+t)},x="_yp_vid",P="_yp_vlh",M=18e5;var E=function(){var t=S.getItem(x),e=S.getItem(P);function n(){S.enabled?(t=[btoa(location.host).substring(0,12),C(8),Date.now()].join("."),S.setItem(x,t)):t="no-vid"}function o(){t&&!function(t){var e=Number(new Date(t));if(!t||Number.isNaN(e))return!0;var n=Date.now();return n-e>M||e-n>M}(Number(e))||n(),e=String(Date.now()),S.setItem(P,e)}return{getVisitId:function(){var e;return o(),null!==(e=t)&&void 0!==e?e:""},hit:o}}(),I=function(t){},B={fn:I},O=new Promise((function(t){B.fn=function(e){var n=e.flags,o=e.experiments,r=e.testIds,i=e.boxes;B.fn=I,t({flags:n,experiments:o,testIds:r,boxes:i})}}));function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t){var e=function(t,e){if("object"!=T(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=T(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T(e)?e:e+""}function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,R(o.key),o)}}function _(t,e,n){return e&&W(t.prototype,e),n&&W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function U(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,A(t,e)}function L(t,e){try{return JSON.parse(t)}catch(t){return e}}function D(){return window.location.origin.endsWith("pay.yandex.ru")?window.location.href:window.location.origin}var j=["message","name","stack"];function F(t){var e=t.message,n=t.level,o=void 0===n?"error":n,r=t.additional,i=p,a=v();return Object.assign({},a,{"-msg":e,"-level":o,"-additional":JSON.stringify(Object.assign({},L(a["-additional"],{}),r)),"-ua":navigator.userAgent,"-ts":Date.now(),"-init-ts":i.initTimestamp,"-url":D(),"-referrer":D()})}function N(e){var n=e.message,o=e.name,r=e.stack,i=t(e,j);return Object.assign({error:n,name:o,stack:r},i)}function K(t){return function(e,n){var o=void 0;n instanceof Error?o=N(n):null!==n&&((null==n?void 0:n.error)instanceof Error&&(o=N(n.error),delete n.error),o=Object.assign({},o,n)),l("690.2354",F({level:t,message:e,additional:o}),g())}}var z=K("fatal"),q=K("error"),V=K("warn"),H=K("info"),Y=K("debug");function $(t){window.location.assign(t)}function G(){return window.location.toString()}function J(t,e){void 0===e&&(e="");try{return new URL(t).origin}catch(t){return e}}function Q(t,e){void 0===e&&(e="");try{return new URL(t).pathname}catch(t){return e}}function Z(t,e){void 0===e&&(e="");try{var n=new URL(t);return[n.origin,n.pathname].join("")}catch(t){return e}}function X(t){var e=function(t,e){void 0===e&&(e="");try{return new URL(t).search.slice(1)}catch(t){return e}}(t);return function(t){var e=new URLSearchParams(t),n={};return e.forEach((function(t,e){n[e]=t})),n}(e)}function tt(t,e,n){void 0===n&&(n="");try{var o=new URL(t),r=function(t){var e=Object.entries(t).filter((function(t){return void 0!==t[1]}));return new URLSearchParams(e).toString()}(Object.assign({},X(t),e));return o.search=r,o.toString()}catch(t){return n}}var et,nt="*",ot="*",rt="__YP__",it="__FQM__",at=function(){return _((function(t){var e,n,o,r;void 0===t&&(t={}),this.targetUrl=void 0,this.channel=void 0,this.sessionId=void 0,this._sourceSearch=void 0,this.targetUrl=null!==(e=t.targetUrl)&&void 0!==e?e:"/",this.channel=null!==(n=t.channel)&&void 0!==n?n:ot,this.sessionId=null!==(o=t.sessionId)&&void 0!==o?o:"",this._sourceSearch=null!==(r=t.sourceSearch)&&void 0!==r?r:""}),[{key:"targetOrigin",get:function(){return J(this.targetUrl)||nt}},{key:"sourceUrl",get:function(){var t=G();return window.location.search?t:t+"?"+this._sourceSearch}},{key:"sourceOrigin",get:function(){return J(this.sourceUrl)||nt}},{key:"isInitialized",get:function(){return"/"!==this.targetUrl}}])}(),st=function(t){try{return t()}catch(t){return}},ut=function(t){this.options=t},ct=function(){function t(t,e,n){void 0===e&&(e=ot),this.payload=t,this.channel=e,this.sourceUrl=n}var e=t.prototype;return e.toJSON=function(){return this.sourceUrl?{payload:this.payload,channel:this.channel,sourceUrl:this.sourceUrl}:{payload:this.payload,channel:this.channel}},e.toString=function(){return JSON.stringify(this)},_(t,[{key:"origin",get:function(){return this.sourceUrl&&J(this.sourceUrl)||nt}}])}(),dt=(n(998),function(){try{document.createEvent("TouchEvent");var t="ontouchstart"in window||navigator.maxTouchPoints;return Boolean(t)}catch(t){return!1}}),lt=function(t){return/Android/i.test(t)},ht=function(t){return lt(t)&&(/wv|WebView/i.test(t)||/Version\/\d+.*\/\d+.0.0.0 Mobile/i.test(t))},ft=function(t){return/iphone|ipod|ipad/i.test(t)},mt=function(t){return/safari/i.test(t)},pt=function(t){return ft(t)&&!mt(t)},yt=navigator.userAgent,vt=/Firefox/i.test(yt),gt=(function(t){/safari/i.test(t)&&/crios|fxios|chrome|EdgiOS|YaBrowser/i.test(t)}(yt),mt(yt),lt(yt)),bt=(ht(yt),ft(yt)),wt=(pt(yt),function(t){return/YaBrowser|BroPP/i.test(t)}(yt)),kt=(function(t){/bank-app\/\d+\.\d+\.\d+\b/i.test(t)}(yt),function(t){/(bank|yb)-sdk\/\d+\.\d+\.\d+\b.*\((ios|android)\)/i.test(t)}(yt),function(t){/ru\.yandex\.ytaxi\/\d+\.\d+\.\d+\b/i.test(t)}(yt),function(t){pt(t)||ht(t)}(yt),function(t){var e=/PassportSDK\/(\d+\.\d+\.\d+)/i.exec(t);if(Boolean(e))return!0;var n=/FintechSDK\/(\d+\.\d+\.\d+)/i.exec(t);if(Boolean(n))return!0;var o=/YandexPaySDK\/(\d+\.\d+\.\d+)/i.exec(t);if(Boolean(o))return!0;if(/PaySDK\/(\d+\.\d+\.\d+)/i.exec(t)){var r=function(t,e,n){try{var o,r,i=navigator.userAgent.match(new RegExp("("+t+")/(?<ver>[\\d.]+)")),a=(null!==(o=null==i||null===(r=i.groups)||void 0===r?void 0:r.ver)&&void 0!==o?o:"").split(".").map(Number);return e.split(".").map((function(t,e){return[a[e],Number(t)]})).reduce((function(t,e){var n=e[0],o=e[1];return t||(n>o?1:n<o?-1:0)}),0)}catch(t){return null!=n?n:null}}("PaySDK","2.8.0",null);return null!==r&&r>=0}return!1}(yt)),St=(kt&&function(t){var e=t.split(" ");e[e.length-1]}(yt),function(t,e){var n;ft(t)&&Boolean(null===(n=e.webkit)||void 0===n?void 0:n.messageHandlers)}(yt,window),function(t,e){ft(t)&&e.indexedDB}(yt,window),function(t){var e,n=/WebView/i.test(t.userAgent),o=Boolean(null===(e=t.userAgentData)||void 0===e?void 0:e.brands.some((function(t){return/WebView/i.test(t.brand)})))}(navigator),et=window,Boolean(et.ReactNativeWebView),function(t){Boolean(t.flutter_inappwebview)}(window),function(){return window.top}),Ct=function(){var t;return ht(navigator.userAgent)?null:null===(t=St())||void 0===t?void 0:t.opener},xt=function(t,e,n){var o;return void 0===n&&(n=!1),tt(t,((o={})[rt]=e,o[it]=n?"1":void 0,o))},Pt=function(t,e){if(t.origin!==e.targetOrigin&&t.origin!==nt&&e.targetOrigin!==nt&&t.origin!==location.origin)throw new Error("Failed to process a message with a different origin\n message origin — "+t.origin+"\n target origin — "+e.targetOrigin);if(t.channel!==e.channel&&t.channel!==ot&&e.channel!==ot)throw new Error("Failed to process a message with a different channel\n message channel — "+t.channel+"\n current channel — "+e.targetOrigin);return t},Mt=function(t){var e=JSON.parse(t.data),n=e.sourceUrl&&J(e.sourceUrl)===t.origin?e.sourceUrl:t.origin;return new ct(e.payload,e.channel,n)},Et={},It=function(t){if(!Et[t])try{Et[t]=new BroadcastChannel(t)}catch(e){Et[t]={onmessage:function(){},addEventListener:function(){},removeEventListener:function(){},postMessage:function(){},close:function(){}}}return Et[t]},Bt=function(){return Boolean(window.BroadcastChannel)},Ot=function(t){function e(e,n){var o;return void 0===n&&(n=Ct()),(o=t.call(this,e)||this)._target=null,o.setTarget(n),o}U(e,t);var n=e.prototype;return n.setTarget=function(t){if(this._target=t,!this.isConnected)throw new TypeError("Target is not set or closed.")},n.createMessage=function(t){return new ct(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this;if(this.isConnected){var n=this.createMessage(t);st((function(){var t;null===(t=e.target)||void 0===t||t.postMessage(String(n),e.options.targetOrigin)}))}},n.destroy=function(){this._target=null},_(e,[{key:"target",get:function(){return this._target}},{key:"isConnected",get:function(){return Boolean(this.target&&!this.target.closed)}}])}(ut),Tt=function(){function t(){this.listeners=[]}var e=t.prototype;return e.emit=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.listeners.forEach((function(t){t.apply(void 0,e)}))},e.on=function(t){var e=this;return this.listeners.push(t),function(){e.off(t)}},e.off=function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))},e.destroy=function(){this.listeners=[]},t}(),Rt=function(t){function e(e){var n;return(n=t.call(this)||this).options=e,n}return U(e,t),e.prototype.processMessage=function(t){var e=Pt(t,this.options);this.emit(e.payload,e)},e}(Tt),Wt=function(t){function e(e){var n;return(n=t.call(this,e)||this).onMessage=function(t){try{var e=Mt(t);n.processMessage(e)}catch(t){0}},window.addEventListener("message",n.onMessage),n}return U(e,t),e.prototype.destroy=function(){window.removeEventListener("message",this.onMessage)},e}(Rt),_t=n(337),At=n.n(_t),Ut=function(t,e){return void 0===e&&(e=document),e?At()(t)?e.querySelector(t):t:null};function Lt(t,e){var n=Ut(t);n&&n.classList.remove(e)}function Dt(t,e){var n=Ut(t);n&&n.classList.add(e)}function jt(t,e,n,o){if(t){var r=Ut(t);r&&r.removeEventListener(e,n,o)}}function Ft(t,e,n){if(void 0===n&&(n=!1),t){var o=Ut(t);o&&Object.keys(e).forEach((function(t){o.style.setProperty(t,String(e[t]),n?"important":void 0)}))}}var Nt={remove:function(t){var e=Ut(t);e&&e.parentElement&&e.parentElement.removeChild(e)},add:function(t,e,n){var o=Ut(t);o&&n?o.insertBefore(e,n):o&&o.appendChild(e)},removeClass:Lt,addClass:Dt,toggleClass:function(t,e,n){n?Dt(t,e):Lt(t,e)},findNode:Ut,off:jt,on:function(t,e,n,o){if(!t)return function(){};var r=Ut(t);return r?(r.addEventListener(e,n,o),function(){return jt(r,e,n,o)}):function(){}},attrs:function(t,e){var n=Ut(t);n&&Object.keys(e).forEach((function(t){n.setAttribute(t,String(e[t]))}))},style:Ft,hide:function(t,e){void 0===e&&(e=!1),Ft(t,{display:"none"},e)},show:function(t,e,n){void 0===e&&(e="block"),void 0===n&&(n=!1),Ft(t,{display:e},n)},getCssProp:function(t,e){var n=Ut(t);return n?getComputedStyle(n)[e]:null},animate:function(t,e){var n,o=e.timingFunction,r=void 0===o?"ease-in-out":o,i=e.duration,a=void 0===i?"200ms":i,s=e.delay,u=void 0===s?"0":s,c=e.property,d=e.from,l=e.to;Ut(t)&&(Ft(t,((n={"transition-timing-function":r,"transition-duration":a,"transition-delay":u,"transition-property":c})[c]=d,n)),setTimeout((function(){var e;Ft(t,((e={})[c]=l,e))}),0))}},Kt=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){var n=this;return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),function(){return n.off(t,e)}},e.once=function(t,e){var n=this,o=function(r){n.off(t,o),e.call(n,r)};return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(o),function(){return n.off(t,o)}},e.off=function(t,e){e?this.listeners[t]=(this.listeners[t]||[]).filter((function(t){return e!==t})):delete this.listeners[t]},e.emit=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(t){t.call(n,e)}))},e.clear=function(){this.listeners={}},e.destroy=function(){this.clear()},t}(),zt=function(t){return t.Simple="SIMPLE",t.Pay="PAY",t.Checkout="CHECKOUT",t}({}),qt=function(t){return t.White="WHITE",t.WhiteOutlined="WHITE-OUTLINED",t.Black="BLACK",t}({}),Vt=function(t){return t.Auto="AUTO",t.Max="MAX",t.MaxImportant="MAX_IMPORTANT",t}({}),Ht=function(t){return t.Click="CLICK",t}({}),Yt=function(t){return t.Widget="WIDGET",t.WidgetUser="WIDGET_USER",t}({}),$t=function(t){return t.Mini="Mini",t.Compact="Compact",t.Simple="Simple",t.BnplOffer="BnplOffer",t.BnplRequired="BnplRequired",t.BnplPreview="BnplPreview",t.Info="Info",t.Ultimate="Ultimate",t}({}),Gt=function(t){return t.Default="default",t.None="none",t}({}),Jt=function(t){return t.Medium="medium",t.Small="small",t}({}),Qt=function(t){return t.Default="default",t.Saturated="saturated",t.Transparent="transparent",t}({}),Zt=($t.Mini,$t.Compact,$t.BnplOffer,$t.BnplRequired,$t.Ultimate,$t.BnplPreview,[$t.BnplOffer,$t.BnplRequired]),Xt=function(t){return t.Light="LIGHT",t.Dark="DARK",t}({}),te=function(t,e,n,o,r){var i=t[e];return n.includes(i)?i:((r||void 0!==i)&&(V('SDK: Invalid "'+String(e)+'" option',{value:i}),console.warn('The "'+String(e)+'" option should be one of — '+n.join(", ")+".")),o)},ee=function(t,e){var n=Object.assign({},e,t);return n.type=te(n,"type",Object.values(zt),e.type,!1),n.theme=te(n,"theme",Object.values(qt),e.theme,!1),n.width=te(n,"width",Object.values(Vt),e.width,!1),n},ne=function(t,e){var n=Object.assign({},e,t),o=n.bnplSelected,r=n.borderRadius,i=n.hideWidgetHeader;return n.buttonType=te(n,"buttonType",Object.values(zt),e.buttonType,!1),"boolean"!=typeof o&&void 0!==o&&(n.bnplSelected=e.bnplSelected,V('SDK: Invalid "bnplSelected" option',{bnplSelected:o}),console.warn('The "bnplSelected" option should be boolean.')),n.borderRadius=Number(n.borderRadius),Number.isFinite(n.borderRadius)||(n.borderRadius=e.borderRadius,V('SDK: Invalid "borderRadius" option',{borderRadius:r}),console.warn('The "borderRadius" option should be number (px).')),n.buttonTheme=te(n,"buttonTheme",Object.values(qt),e.buttonTheme,!1),n.widgetTheme=te(n,"widgetTheme",Object.values(Xt),e.widgetTheme,!1),n.widgetType=te(n,"widgetType",Object.values($t),e.widgetType,!1),"boolean"!=typeof i&&void 0!==i&&(n.hideWidgetHeader=e.hideWidgetHeader,V('SDK: Invalid "hideWidgetHeader" option',{hideWidgetHeader:i}),console.warn('The "hideWidgetHeader" option should be boolean.')),"boolean"!=typeof n.isPrepayment&&(n.isPrepayment=!1),n};var oe,re,ie,ae="https://pay.yandex.ru/web",se="https://pay.yandex.ru",ue=ae+"/form",ce=ae+"/payment",de=ae+"/checkout",le=ae+"/sdk/v1/init-2",he=ae+"/sdk/v1/payment-method",fe=ae+"/sdk/v1/widget",me=ae+"/f/info-widget",pe=ae+"/f/ultimate-widget",ye=ae+"/f/simple-widget",ve=ae+"/f/simple-widget-modal",ge=ae+"/sdk/v1/info-widget",be=[960,705],we=[510,(oe=820,re=window.screen.height,Math.min(re,oe))],ke="ya-pay-button",Se="ya-pay-widget",Ce="ya-pay-backdrop",xe="yandex-pay-badge",Pe=ae,Me="testing"===(ie="production_vr8p6z9pn3".split("_")[0])?ie:"production",Ee=function(t){return t.SdkByTokenRequest="sdk--by-token-request",t.SdkByTokenRequestError="sdk--by-token-request.error",t.SdkRemountStickyButton="sdk--remount-sticky-button",t}({}),Ie=""+(.001*Date.now()|0)+(1073741824*Math.random()|0),Be=""+(1e3*Math.random()|0)+(.001*Date.now()|0),Oe="sdk-"+(1e3*Math.random()|0)+(.001*Date.now()|0),Te=75,Re=32,We=function(t){return null!==t&&"object"==typeof t},_e=function(t){return"function"==typeof t},Ae=function(t){return(We(t)||_e(t))&&_e(t.then)},Ue=new function(t){var e=this;for(var n in this.data=void 0,this.reactPairs=new Map,this.setPair=function(t,n){return e.reactPairs.set(t,n)},this.getPair=function(t){return e.reactPairs.get(t)},this.createPairPromise=function(t){var n,o=new Promise((function(t){n=t}));return e.setPair(t,[o,n]),o},this.set=function(t,n){var o;return null!=n&&(e.data[t]=n,null===(o=e.getPair(t))||void 0===o||o[1](n),!0)},this.get=function(t){return e.data[t]},this.getP=function(t){var n=e.getPair(t);return n?n[0]:e.createPairPromise(t)},this.data=t,this.data)this.createPairPromise(n)}({hasNewPRA:!1,disabledPRA:!1}),Le=function(t,e){var n=void 0===e?{}:e,o=n.src,r=n.hideThrowOpacity,i=document.createElement("iframe");return Nt.attrs(i,{name:t,title:t,frameborder:"0",tabindex:"-1","aria-hidden":"true"}),o&&Nt.attrs(i,{src:o}),r?Nt.style(i,{opacity:"0"}):Nt.hide(i),i},De=function(t,e,n){var o=document.createElement("iframe"),r="ya-frame-"+C(8);return e&&Nt.style(o,e),Nt.attrs(o,Object.assign({src:t,name:r,title:r,frameborder:"0",tabindex:"-1","aria-hidden":"true"},n?{class:n}:{})),o},je=n(339),Fe=n.n(je),Ne=n(867),Ke=n.n(Ne),ze=n(843),qe=n.n(ze),Ve=n(974),He=n.n(Ve),Ye=function(t){return t.Token="Token",t.Payment="Payment",t.Checkout="Checkout",t.CheckoutOld="CheckoutOld",t.Subscription="Subscription",t.ByToken="ByToken",t}({}),$e=function(t){return t.Production="PRODUCTION",t.Sandbox="SANDBOX",t}({}),Ge=function(t){return t.Ru="RU",t.Us="US",t.By="BY",t}({}),Je=function(t){return t.Rub="RUB",t.Byn="BYN",t.Usd="USD",t.Eur="EUR",t.Kzt="KZT",t.Uah="UAH",t.Amd="AMD",t.Gel="GEL",t.Azn="AZN",t.Kgs="KGS",t.Gbp="GBP",t.Sek="SEK",t.Pln="PLN",t.Inr="INR",t.Czk="CZK",t.Cad="CAD",t.Brl="BRL",t.Aud="AUD",t.Uzs="UZS",t.Chf="CHF",t.Try="TRY",t.Cny="CNY",t.Zar="ZAR",t.Bgn="BGN",t.Ron="RON",t.Hkd="HKD",t.Aed="AED",t}({}),Qe=function(t){return t.Pickup="PICKUP",t.Shipping="SHIPPING",t.Discount="DISCOUNT",t.Promocode="PROMOCODE",t}({}),Ze=function(t){return t.Card="CARD",t.Cash="CASH",t.Split="SPLIT",t}({}),Xe=function(t){return t.CloudToken="CLOUD_TOKEN",t.PanOnly="PAN_ONLY",t}({}),tn=function(t){return t.AmericanExpress="AMEX",t.Discover="DISCOVER",t.Jcb="JCB",t.Mastercard="MASTERCARD",t.Visa="VISA",t.VisaElectron="VISAELECTRON",t.Maestro="MAESTRO",t.Mir="MIR",t.UnionPay="UNIONPAY",t.Uzcard="UZCARD",t}({}),en=function(t){return t.Recurring="RECURRING",t.Deferred="DEFERRED",t}({}),nn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return t+function(t,e){void 0===e&&(e=0);var n=Number(t);return isNaN(n)?e:n}(e)}),0).toFixed(2)};function on(t){return!!t&&(3===parseInt(null==t?void 0:t.version)&&!("merchant"in t))}function rn(t){return!!t&&(2===parseInt(null==t?void 0:t.version)||"merchant"in t)}function an(t){return 4===(null==t?void 0:t.version)}function sn(t){return He()(["merchant","url"],"",t)}var un=function(t){return on(t)||an(t)?He()(["merchantId"],"",t):He()(["merchant","id"],"",t)},cn=function(t){return He()(["version"],void 0,t)},dn=function(t){return on(t)?He()(["orderId"],void 0,t):He()(["order","id"],void 0,t)},ln=function(t){return He()(["total","amount"],"",t)||nn.apply(void 0,He()(["items"],[],t).map((function(t){return t.total})))};var hn=function(t){return an(t)?He()(["totalAmount"],"0",t):on(t)?function(t){return ln(t.cart)}(t):function(t){return He()(["order","total","amount"],"0",t)}(t)};function fn(t){return He()(["currencyCode"],"",t)}function mn(t){var e=qe()(["requiredFields","shippingTypes"],t);if(e)return{direct:He()(["direct"],!1,e),pickup:He()(["pickup"],!1,e)}}function pn(t){var e=qe()(["requiredFields","shippingContact"],t);if(e)return{name:He()(["name"],!0,e),email:He()(["email"],!0,e),phone:He()(["phone"],!1,e)}}function yn(t){return on(t)||an(t)?He()(["availablePaymentMethods"],[],t):He()(["paymentMethods"],[],t).map((function(t){return t.type}))}function vn(t){return Boolean(pn(t)||mn(t))||t.type&&[Ye.Checkout,Ye.CheckoutOld].includes(t.type)}function gn(t){return(on(t)||an(t))&&t.availablePaymentMethods&&1===Ke()(t.availablePaymentMethods)&&Fe()(t.availablePaymentMethods)===Ze.Split}function bn(t){return[un(t),C(8),Date.now()].join(".")}function wn(t){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wn(t)}function kn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kn=function(){return!!t})()}function Sn(t){var e="function"==typeof Map?new Map:void 0;return Sn=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(kn())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var r=new(t.bind.apply(t,o));return n&&A(r,n.prototype),r}(t,arguments,wn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),A(n,t)},Sn(t)}var Cn,xn=function(t){function e(){return t.apply(this,arguments)||this}return U(e,t),e}(Sn(Error)),Pn=function(t){function e(){return t.apply(this,arguments)||this}return U(e,t),e}(Sn(Error));function Mn(t,e){if(!t){var n=new xn(e);throw H("assert-error",n),n}}function En(t){if(on(t)||an(t))return!1;var e=t.requiredFields;return Boolean(e&&("shippingContact"in e||"shippingTypes"in e))}function In(t){on(t)&&function(t,e){return We(e)&&Object.prototype.hasOwnProperty.call(e,t)}("metadata",t)&&(Mn("string"==typeof t.metadata,"sheet.metadata must be a string"),"string"==typeof t.metadata&&Mn(encodeURIComponent(t.metadata).length<=512,"sheet.metadata is too long"))}function Bn(t){var e;if(on(t)||an(t))return{allowedAuthMethods:[],allowedCardNetworks:[]};var n=null===(e=t.paymentMethods)||void 0===e?void 0:e.find((function(t){return t.type===Ze.Card}));if(!n)return{allowedAuthMethods:[],allowedCardNetworks:[]};var o=n.allowedAuthMethods,r=void 0===o?[]:o,i=n.allowedCardNetworks;return{allowedAuthMethods:r,allowedCardNetworks:void 0===i?[]:i}}function On(t){return rn(t)?t.merchant:{id:t.merchantId,url:"",name:""}}var Tn=function(t){return t.type?t.type:an(t)?Ye.ByToken:on(t)?t.orderId?Ye.Payment:Ye.Checkout:En(t)?Ye.CheckoutOld:Ye.Token},Rn=function(t){return[Ye.Payment,Ye.Checkout].includes(t)},Wn=function(t,e){return rn(t)&&"order"in e?(t.order=Object.assign({},t.order,e.order),!0):on(t)&&("cart"in e||"metadata"in e)?(t.cart=Object.assign({},t.cart,e.cart),t.metadata=e.metadata||t.metadata,!0):!(!an(t)||!("totalAmount"in e)&&!("availablePaymentMethods"in e))&&(t.totalAmount=e.totalAmount||t.totalAmount,t.availablePaymentMethods=e.availablePaymentMethods||t.availablePaymentMethods,!0)},_n=((Cn={})[Ye.Token]="payment",Cn[Ye.Payment]="payment-v3",Cn[Ye.Checkout]="checkout-v3",Cn[Ye.CheckoutOld]="checkout",Cn[Ye.Subscription]="subscription",Cn[Ye.ByToken]="payment-v3",Cn);function An(t){return t.replace(/^https:\/\/pay\.yandex\./,"https://sandbox.pay.yandex.")}var Un=function(t,e){void 0===e&&(e={});var n={};if(n.abuid=Be,n.ymuid=Ie,e.rpcs&&(n.rpcs=e.rpcs),e.sessionType&&(n.pt=_n[e.sessionType],n.st=e.sessionType),e.duid&&(n.duid=e.duid),e.extra&&(n.extra=JSON.stringify(e.extra)),t){var o=function(t,e){var n=e?"click-"+e:"";return n?[t,n]:[t]}(t,e.checkoutCounter);n.msid=o[0]||"",n.mcid=o[1]||""}return e.sdkInIframe&&(n.sifrm="1"),e.merchantId&&(n.merchantId=e.merchantId),n},Ln=function(t,e,n){void 0===n&&(n={});var o=t,r=Un(e,n);return n.env===$e.Sandbox&&(o=An(t)),tt(o,r)};function Dn(t){return J(t)}var jn=function(t,e){var n;return void 0===e&&(e=0),setTimeout(t,null!==(n=e)&&void 0!==n?n:1e3)},Fn=function(t,e,n){var o;void 0===n&&(n=0);var r=function(){if(t())return e();o=jn(r,n)};return r(),function(){o&&clearTimeout(o)}},Nn=function(t){return void 0===t&&(t=""),t+"-"+ ++Nn.counter};function Kn(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}Nn.counter=0;var zn={};function qn(t,e,n){void 0===n&&(n={});var o=v(n),r={1701:t,2877:Kn(e)};Object.entries(o).forEach((function(t){var e=t[0],n=t[1];r[e]=String(n)})),l("690.2096.2877",r,g())}function Vn(t){zn[t]=[Date.now()]}function Hn(t){var e=zn[t];e&&0!==e.length&&(e.push(Date.now(),v()),function(t){var e,n,o,r=zn[t],i=void 0;if(r&&(n=r[0],o=r[1],i=r[2]),void 0!==n&&void 0!==o){var a={1701:t,207.2154:Kn(n),207.1428:Kn(o),2877:Kn(o-n)};Object.entries(null!==(e=i)&&void 0!==e?e:{}).forEach((function(t){var e=t[0],n=t[1];a[e]=String(n)})),l("690.2096.2877",a),delete zn[t]}}(t))}var Yn=function(t){return t[t.InitFrameCreationStarted=0]="InitFrameCreationStarted",t[t.InitFrameCreated=1]="InitFrameCreated",t[t.FirstSessionCreationStarted=2]="FirstSessionCreationStarted",t[t.SessionCreationStarted=3]="SessionCreationStarted",t[t.SessionCreated=4]="SessionCreated",t[t.FirstViewMountingStarted=5]="FirstViewMountingStarted",t[t.WidgetMountingStarted=6]="WidgetMountingStarted",t[t.WidgetMounted=7]="WidgetMounted",t[t.SimpleButtonMountingStarted=8]="SimpleButtonMountingStarted",t[t.SimpleButtonMounted=9]="SimpleButtonMounted",t[t.PersonalButtonMountingStarted=10]="PersonalButtonMountingStarted",t[t.PersonalButtonMounted=11]="PersonalButtonMounted",t[t.SimpleWidget_MountingStarted=12]="SimpleWidget_MountingStarted",t[t.SimpleWidget_Mounted=13]="SimpleWidget_Mounted",t[t.SimpleWidgetModal_MountingStarted=14]="SimpleWidgetModal_MountingStarted",t[t.SimpleWidgetModal_Mounted=15]="SimpleWidgetModal_Mounted",t[t.InfoWidget_MountingStarted=16]="InfoWidget_MountingStarted",t[t.InfoWidget_Mounted=17]="InfoWidget_Mounted",t[t.UltimateWidget_MountingStarted=18]="UltimateWidget_MountingStarted",t[t.UltimateWidget_Mounted=19]="UltimateWidget_Mounted",t}({}),$n=function(t){return t.CreateInitFrame="sdk--create-init-frame",t.WaitInitFrame="sdk--wait-init-frame",t.WaitCreateSession="sdk--wait-create-session",t.CreateSession="sdk--create-session",t.WaitMount="sdk--wait-mount",t.ShowWidget="sdk--show-widget",t.ShowSimpleButton="sdk--show-simple-button",t.ShowSimpleButtonByWidget="sdk--show-simple-button.by-widget",t.ShowPersonalButton="sdk--show-personal-button",t.ShowPersonalButtonByWidget="sdk--show-personal-button.by-widget",t.ShowSimpleButtonFromCreate="sdk--show-simple-button.from-create",t.ShowSimpleButtonFromCreateByWidget="sdk--show-simple-button.by-widget.from-create",t.ShowPersonalButtonFromCreate="sdk--show-personal-button.from-create",t.ShowPersonalButtonFromCreateByWidget="sdk--show-personal-button.by-widget.from-create",t.ShowSimpleWidget="sdk--show-simple-widget",t.ShowSimpleWidgetFromInit="sdk--show-simple-widget.from-init",t.ShowSimpleWidgetModal="sdk--show-simple-widget-modal",t.ShowUltimateWidget="sdk--show-ultimate-widget",t}($n||{}),Gn={deltaName:$n.CreateInitFrame,from:Yn.InitFrameCreationStarted,to:Yn.InitFrameCreated},Jn={deltaName:$n.WaitInitFrame,sendZero:!0,from:Yn.FirstSessionCreationStarted,to:Yn.InitFrameCreated},Qn={deltaName:$n.WaitCreateSession,sendZero:!0,from:Yn.InitFrameCreated,to:Yn.FirstSessionCreationStarted},Zn={deltaName:$n.CreateSession,from:Yn.SessionCreationStarted,to:Yn.SessionCreated},Xn={deltaName:$n.WaitMount,from:Yn.SessionCreated,to:Yn.FirstViewMountingStarted},to={deltaName:$n.ShowWidget,from:Yn.WidgetMountingStarted,to:Yn.WidgetMounted},eo={deltaName:$n.ShowWidget,from:Yn.UltimateWidget_MountingStarted,to:Yn.UltimateWidget_Mounted},no={deltaName:$n.ShowSimpleWidget,from:Yn.SimpleWidget_MountingStarted,to:Yn.SimpleWidget_Mounted},oo={deltaName:$n.ShowSimpleWidgetModal,from:Yn.SimpleWidgetModal_MountingStarted,to:Yn.SimpleWidgetModal_Mounted},ro={deltaName:$n.ShowSimpleWidgetFromInit,trigger:Yn.SimpleWidget_Mounted,include:[Gn,no]},io=function(t){var e=t.isInWidget;return{deltaName:Boolean(e)?$n.ShowSimpleButtonByWidget:$n.ShowSimpleButton,from:Yn.SimpleButtonMountingStarted,to:Yn.SimpleButtonMounted}},ao=function(t){var e=t.isInWidget;return{deltaName:Boolean(e)?$n.ShowPersonalButtonByWidget:$n.ShowPersonalButton,from:Yn.PersonalButtonMountingStarted,to:Yn.PersonalButtonMounted}},so=function(t){var e=t.isInWidget,n=[Zn];return n.push(io({isInWidget:e})),{deltaName:Boolean(e)?$n.ShowSimpleButtonFromCreateByWidget:$n.ShowSimpleButtonFromCreate,trigger:Yn.SimpleButtonMounted,include:n}};function uo(t){return void 0!==t.trigger}var co,lo=[Gn,Jn,Qn,Zn,Xn,to,eo,no,oo,ro,io,ao,so,function(t){var e=t.isInWidget,n=so({isInWidget:e}).include;return n.push(ao({isInWidget:e})),{deltaName:Boolean(e)?$n.ShowPersonalButtonFromCreateByWidget:$n.ShowPersonalButtonFromCreate,trigger:Yn.PersonalButtonMounted,include:n}}];function ho(t,e){return e-t}function fo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return mo(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var po=function(){function t(t,e){this.marks=void 0,this.additional=void 0,this.marks=[].concat(t),this.additional=e}t.of=function(t){return this.registry.get(t)||this.primary},t.ofSession=function(t){return this.sessionRegistry.get(t)||this.primary},t.unbindFromSession=function(t){this.sessionRegistry.delete(t)};var e=t.prototype;return e.fork=function(e){return void 0===e&&(e={}),new t(this.marks,Object.assign({},this.additional,e))},e.bind=function(e){t.registry.set(e,this)},e.bindBySession=function(e){t.sessionRegistry.set(e,this)},e.send=function(t,e){qn(t,e,this.additional)},e.trySendSimple=function(t){var e=t.deltaName,n=t.sendZero,o=t.from,r=t.to;if(this.has(o)&&this.has(r)){var i=ho(this.get(o),this.get(r));this.send(e,i)}else n&&this.has(r)&&this.send(e,0)},e.trySendCompound=function(t){for(var e,n=t.deltaName,o=0,r=fo(t.include);!(e=r()).done;){var i=e.value,a=i.from,s=i.to;if(!this.has(a)||!this.has(s))return;o+=ho(this.get(a),this.get(s))}this.send(n,o)},e.trySend=function(t){if(this.has(t))for(var e,n=fo(lo);!(e=n()).done;){var o=e.value;"function"==typeof o&&(o=o(this.additional)),uo(o)?o.trigger===t&&this.trySendCompound(o):o.to===t&&this.trySendSimple(o)}},e.has=function(t){return void 0!==this.marks[t]},e.get=function(t){return this.marks[t]},e.mark=function(t){this.has(t)||(this.marks[t]=window.performance?performance.now():Date.now(),this.trySend(t))},t}();co=po,po.registry=new WeakMap,po.sessionRegistry=new Map,po.primary=new co([],{});var yo=function(t){return t.Ready="ready",t.Abort="abort",t.Error="error",t.Process="process",t.Ping="ping",t.Change="change",t.Reset="reset",t.Setup="setup",t.Success="success",t.NativeInitialize="nativeInitialize",t}({}),vo=function(t){return t.Close="CLOSE",t.Timeout="TIMEOUT",t.ManualClose="MANUAL_CLOSE",t}({}),go=function(t){return t.SdkReady="sdk-ready",t.SdkExp="sdk-exp",t.SdkPing="sdk-ping",t.SdkSplitAvailable="sdk-split-available",t.PaymentUpdate="payment-update",t.PaymentProcess="payment-process",t.PaymentLock="payment-lock",t.PaymentError="payment-error",t.PaymentExtra="payment-extra",t.PaymentUnlock="payment-unlock",t.IsReadyToPay="sdk-is-ready-to-pay",t.CheckPayment="sdk-check-payment",t.SdkCheckPaymentResponse="sdk-check-payment-response",t.SdkBroadcastSendMessage="sdk-broadcast-send-message",t.SdkBroadcastOnMessage="sdk-broadcast-on-message",t.SdkIsSplitAvailable="sdk-is-split-available",t.SdkIsSplitAvailableResponse="sdk-is-split-available-response",t}({}),bo=function(t){return t.Setup="setup",t.Payment="payment",t.Update="update",t.Complete="complete",t.Ping="ping",t.NativeInitialized="nativeInitialized",t.GoBack="goback",t}({}),wo=function(t){return t.Success="success",t.Error="error",t.Close="close",t.AuthRedirect="auth-redirect",t}({}),ko=function(t){function e(){var e;return(e=t.call(this)||this).mounted=!1,e.frame=void 0,e.listener=void 0,e.emitter=void 0,e.paymentReady=new Map,e.paymentStart=new Map,e.sendMessage=function(t){Fn((function(){return e.mounted}),(function(){e.emitter?e.emitter.send(t):z("SDK: init frame 2 cannot send message because of emitter")}),100)},e.onMessage=function(t){t&&t.type&&(t.type===go.SdkReady&&Ue.set("disabledPRA",t.disabledPRA),t.type!==go.SdkExp&&t.type!==go.SdkReady&&t.type!==go.SdkCheckPaymentResponse&&t.type!==go.SdkBroadcastOnMessage&&t.type!==go.SdkIsSplitAvailableResponse||e.emit(t.type,t))},e.subscribeOnFrame(),e.mountFrame(),e}U(e,t),e.getInstance=function(){return e.instance||(po.primary.mark(Yn.InitFrameCreationStarted),e.instance=new e),e.instance};var n=e.prototype;return n.subscribeOnFrame=function(){var t=this;this.once(go.SdkExp,(function(e){t.mounted=!0,B.fn(e),po.primary.mark(Yn.InitFrameCreated)}))},n.mountFrame=function(){var t=this;if(this.frame)z("SDK: Skip mount init frame 2");else try{var e=Ln(le,null),n=Dn(e),o=new at({targetUrl:n}),r="ya-frame-"+C(8);Fn((function(){return Boolean(document.body)}),(function(){var n;t.frame=Le(r,{src:e}),Nt.add(document.body,t.frame),t.emitter=new Ot(o,null!==(n=t.frame.contentWindow)&&void 0!==n?n:void 0)}),10),this.listener=new Wt(o),this.listener.on(this.onMessage);var i=setTimeout((function(){V("SDK: Init frame timed out"),t.emit(go.SdkReady,{type:go.SdkReady,readyToPay:!1})}),15e3);this.once(go.SdkExp,(function(){clearTimeout(i)}))}catch(t){q("init speedupFrame",t),this.emit(go.SdkReady,{type:go.SdkReady,readyToPay:!1})}},_(e,[{key:"isReady",get:function(){return this.mounted}}])}(Kt);ko.instance=void 0;var So=function(){if(!window)return!1;try{return window.self!==window.top}catch(t){return!0}},Co=/(.)([A-Z][a-z]+)/g,xo=/([a-z0-9])([A-Z])/g;function Po(t){for(var e,n={},o=0,r=Object.entries(t);o<r.length;o++){var i=r[o],a=i[0],s=i[1];n[(e=a,e.replace(Co,"$1_$2").replace(xo,"$1_$2").toLowerCase())]=s}return n}var Mo=["experiments","testIds","boxes"],Eo="border-radius: 6px; padding: 2px 4px; color: white; font-weight: 300; background-color: #da9827;",Io={env:"production",project:"pay",page:"",platform:f(),product:"",productVersion:"",merchantId:"",checkoutOrderId:"",sessionId:"",transactionId:"",version:"0.0.0",experiments:"",puid:"",rnd_f:"",rnd_b:"",testIds:"",by_configurator:!1,_debug:!1},Bo=function(t){return"production"===String(t||"").toLowerCase()?"production":"testing"};function Oo(e){var n=Bo(e.env||Io.env),o=e.experiments,i=e.testIds,a=e.boxes,s=t(e,Mo);o&&(s.experiments=h(o)),a?s.testIds=a:i&&i.length&&(s.testIds=i.map(encodeURIComponent).join(";")),Io=Object.assign(Io,r(s),{env:n})}function To(t,e,n){var o;"object"==typeof e&&(n=e,e=1);var r=function(t,e,n){void 0===n&&(n={});var o=Io.env;"production"===o&&n.env&&(o=Bo(n.env),delete n.env);var r="number"==typeof e?Number.isInteger(e)?"integer":"float":"string";return{rum_id:"ru."+Io.project,"-version":Io.version,"-env":o,"-ua":navigator.userAgent,"-project":Io.project,"-page":Io.page,"-ts":Date.now(),"-type":r,"-name":t,"-value":e,"-url":D(),"-referrer":D(),"-additional":JSON.stringify(Po(Object.assign({merchantId:Io.merchantId,sessionId:Io.sessionId,checkoutOrderId:Io.checkoutOrderId},Io.transactionId&&{transactionId:Io.transactionId},{platform:Io.platform,product:Io.product,productVersion:Io.productVersion,puid:Io.puid,rnd_f:Io.rnd_f,rnd_b:Io.rnd_b,by_configurator:Io.by_configurator},n)))}}(t,null!==(o=e)&&void 0!==o?o:1,n),i=[];Io.experiments&&i.push("experiments="+Io.experiments),Io.testIds&&i.push("slots="+Io.testIds),Io._debug&&function(t){for(var e=L(t["-additional"],{}),n={},o=0,r=Object.entries(t);o<r.length;o++){var i=r[o],a=i[0],s=i[1];"-additional"!==a&&(n[a.startsWith("-")?a.slice(1):a]=s)}function u(t){for(var e in t){var n=t[e];(n instanceof Array||n instanceof Object)&&(t[e]=JSON.stringify(n))}return t}console.groupCollapsed("%csignal: "+t["-name"],Eo),console.log("Additionals"),console.table(u(e)),console.log("Signal data"),console.table(u(n)),console.groupEnd()}(r),l("690.32",r,["table=rum_events"].concat(i)),l("690.32",r,["table=trust_front"].concat(i))}var Ro={init:Oo,update:Oo};function Wo(t,e){To(t,e)}var _o={buttonRender:function(t){return Wo("sdk-button-render",t)},buttonClick:function(t){return Wo("sdk-button-click",t)},buttonCheckout:function(t){return Wo("sdk-button-checkout",t)},buttonCheckoutAbort:function(t){return Wo("sdk-button-checkout-abort",t)},buttonCheckoutError:function(t){return Wo("sdk-button-checkout-error",t)},createSession:function(t){return Wo("sdk-create-session",function(t){for(var e={},n=0,o=Object.entries(t||{});n<o.length;n++){var r=o[n],i=r[0],a=r[1];e[i]="boolean"==typeof a?a?"yes":"no":a}return e}(t))},mountWidget:function(t){return Wo("sdk-widget-mount",t)}},Ao=Object.assign({},Ro,{sdk:_o});function Uo(t){t.env===$e.Sandbox&&function(t){y({env:t})}("prestable")}function Lo(t){(on(t)||an(t))&&(t.availablePaymentMethods?Array.isArray(t.availablePaymentMethods)?0===t.availablePaymentMethods.length?Y("SDK: availablePaymentMethods empty"):Y("SDK: availablePaymentMethods",{value:t.availablePaymentMethods}):Y("SDK: availablePaymentMethods not array",{value:t.availablePaymentMethods}):Y("SDK: availablePaymentMethods undefined"))}var Do=function(t){return{env:t.env||"",merchantId:un(t),product:(e=t,_n[e.type]),productVersion:String(cn(t)),paymentMethods:yn(t)};var e},jo=function(t){function e(e){var n;return(n=t.call(this,e)||this)._bc=void 0,n._bc=It(n.options.sessionId),n}U(e,t);var n=e.prototype;return n.createMessage=function(t){return new ct(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this.createMessage(t);this._bc.postMessage(String(e))},n.destroy=function(){},_(e,[{key:"isConnected",get:function(){return!0}}])}(ut),Fo=function(t){function e(e){var n;return(n=t.call(this,e)||this)._bc=void 0,n.onMessage=function(t){try{var e=Mt(t);n.processMessage(e)}catch(t){0}},n._bc=It(n.options.sessionId),n._bc.addEventListener("message",n.onMessage),n}return U(e,t),e.prototype.destroy=function(){this._bc.removeEventListener("message",this.onMessage)},e}(Rt),No=function(t){function e(e,n,o){var r,i=(r=t.call(this,e,St())||this).createMessage(n),a=function(t,e){return void 0===e&&(e={}),window.open(t,e.target,e.features)}(xt(e.targetUrl,String(i)),{target:e.channel,features:o});return r.setTarget(a),r}U(e,t);var n=e.prototype;return n.focus=function(){var t=this;this.isConnected&&st((function(){var e;null===(e=t.target)||void 0===e||e.focus()}))},n.close=function(){var t=this;this.isConnected&&st((function(){var e;null===(e=t.target)||void 0===e||e.close()}))},e}(Ot),Ko=function(t){function e(e,n){var o;return(o=t.call(this,e)||this).target=void 0,o.target=n,o}U(e,t);var n=e.prototype;return n.createMessage=function(t){return new ct(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this,n=this.createMessage(t);st((function(){e.target.postMessage(String(n))}))},n.destroy=function(){},_(e,[{key:"isConnected",get:function(){return!0}}])}(ut),zo=function(t){function e(e,n){var o;return(o=t.call(this,e)||this).target=void 0,o.onMessage=function(t){try{var e=o.createMessage(t);o.processMessage(e)}catch(t){0}},o.target=n,o.target&&"function"==typeof o.target.addEventListener&&o.target.addEventListener("message",o.onMessage),o}U(e,t);var n=e.prototype;return n.createMessage=function(t){var e=JSON.parse(t.data),n=e.sourceUrl&&J(e.sourceUrl)===t.origin?e.sourceUrl:t.origin;return new ct(e.payload,e.channel,n)},n.destroy=function(){this.target.removeEventListener("message",this.onMessage)},e}(Rt),qo=function(t){function e(e){var n;return(n=t.call(this,e)||this).isSent=!1,n}U(e,t);var n=e.prototype;return n.constructUrl=function(t){return t||this.options.targetUrl},n.send=function(t,e){this.isSent||($(this.constructUrl(e)),this.isSent=!0)},n.destroy=function(){this.isSent=!0},_(e,[{key:"isConnected",get:function(){return!1}}])}(ut),Vo=function(t){function e(e,n){var o;return void 0===n&&(n={}),(o=t.call(this,e)||this).params=n,o.isSent=!1,o}U(e,t);var n=e.prototype;return n.createMessage=function(t){var e=this.options.sourceUrl;return this.params.noEmitSourceUrl&&(e=void 0),new ct(t,this.options.channel,e)},n.constructUrl=function(t){var e=this.createMessage(t);return xt(this.options.targetUrl,String(e),this.params.forceQueryMode)},n.send=function(t){this.isSent||($(this.constructUrl(t)),this.isSent=!0)},n.destroy=function(){this.isSent=!0},_(e,[{key:"isConnected",get:function(){return!1}}])}(ut),Ho=function(t){function e(e,n,o){var r;return void 0===o&&(o=!1),r=t.call(this,e)||this,o?setTimeout((function(){return r.send(n)}),500):r.send(n),r}U(e,t);var n=e.prototype;return n.focus=function(){},n.close=function(){},e}(Vo),Yo=function(t){function e(e){var n;return(n=t.call(this,e)||this).processTimeout=void 0,n.onProcess=function(){try{var t=n.createMessage();n.processMessage(t)}catch(t){0}},n.processTimeout=setTimeout(n.onProcess,50),n}U(e,t);var n=e.prototype;return n.hasQueryMessage=function(){return t=this.options.sourceUrl,e=X(t),{hasMessage:Boolean(e[rt]),hasForceMode:Boolean(e[it])};var t,e},n.createMessage=function(){var t=X(this.options.sourceUrl)[rt]||"",e=JSON.parse("?"===t.slice(-1)?t.slice(0,-1):t);return new ct(e.payload,e.channel,e.sourceUrl)},n.destroy=function(){clearTimeout(this.processTimeout)},e}(Rt),$o=function(t){function e(e){var n;return void 0===e&&(e=new at),(n=t.call(this)||this).options=e,n.queryListener=void 0,n.messageListener=void 0,n.nativeListener=void 0,n.broadcastListener=void 0,n.waitInitializationP=void 0,n.setInitialized=void 0,n.emitter=void 0,n.onMessage=function(t,e){n.emit(t,e)},n.onOptionsMessage=function(t,e){var o,r;n.options.isInitialized?n.clearSource():n.updateOptions(e),null===(o=(r=n).setInitialized)||void 0===o||o.call(r,!0)},n.createQueryListener(),n.createMessageListener(),n.createBroadcastListener(),n.waitInitializationP=new Promise((function(t){n.setInitialized=t,n.options.isInitialized&&t(!0)})),n}U(e,t);var n=e.prototype;return n.createQueryListener=function(){this.queryListener=new Yo(this.options),this.queryListener.on(this.onMessage),this.queryListener.on(this.onOptionsMessage)},n.createMessageListener=function(){this.messageListener=new Wt(this.options),this.messageListener.on(this.onMessage)},n.createBroadcastListener=function(){Bt()&&(this.broadcastListener=new Fo(this.options),this.broadcastListener.on(this.onMessage))},n.createNativeListener=function(t){var e;this.nativeListener=new zo(this.options,t),this.nativeListener.on(this.onMessage),null===(e=this.messageListener)||void 0===e||e.off(this.onMessage),this.broadcastListener&&this.broadcastListener.off(this.onMessage)},n.clearSource=function(){var t;(function(t){history.replaceState(null,document.title,t)})(tt(this.options.sourceUrl,((t={})[rt]=void 0,t[it]=void 0,t)).split("#")[0])},n.updateOptions=function(t){this.options.targetUrl=t.sourceUrl||"/"},n.hasQueryMessage=function(){var t;return null===(t=this.queryListener)||void 0===t?void 0:t.hasQueryMessage()},n.connect=function(t){var e;void 0===t&&(t={});var n=this.connectNative(t);if(n)return n;var o=(null===(e=t.message)||void 0===e?void 0:e.target)||Ct();try{if(t.forceQueryMode||o===window)throw new Error;return this.emitter=new Ot(this.options,o),this.emitter}catch(e){var r;return Bt()&&null!==(r=t.connection)&&void 0!==r&&r.isQueryModeDisabled?(this.emitter=new jo(this.options),this.emitter):(this.emitter=new Vo(this.options,Object.assign({forceQueryMode:Boolean(t.forceQueryMode)},t.query)),this.emitter)}},n.connectNative=function(t){if(void 0===t&&(t={}),t.native&&(t.native.listener&&this.createNativeListener(t.native.listener),t.native.target))return this.emitter=new Ko(this.options,t.native.target),this.emitter},n.connectRedirectEmitter=function(){return this.emitter=new qo(this.options),this.emitter},n.open=function(t,e,n,o,r){try{return o?new Ho(this.options,t,null==n?void 0:n()):new No(this.options,t,e)}catch(e){if(r)throw new Error("QueryMode is disabled");var i=null==n?void 0:n();return new Ho(this.options,t,i)}},n.destroy=function(){var t,e;null===(t=this.queryListener)||void 0===t||t.destroy(),null===(e=this.messageListener)||void 0===e||e.destroy(),this.broadcastListener&&this.broadcastListener.destroy()},n.waitInitialization=function(){return this.waitInitializationP},_(e,[{key:"isQueryMode",get:function(){return this.emitter instanceof Vo||this.emitter instanceof qo}},{key:"isBroadcastMode",get:function(){return this.emitter instanceof jo}}])}(Tt);function Go(t,e){var n,o=null===(n=("; "+document.cookie).split("; "+t+"=").pop())||void 0===n?void 0:n.split(";").shift();return void 0===o?e:o}var Jo=n(970),Qo=n.n(Jo),Zo=function(t,e){return void 0===e&&(e={}),function(){var n=[],o=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];Array.isArray(r)&&(i=r,r=void 0),Array.isArray(o)&&(i=o,o=void 0),"object"==typeof o&&(r=o,o=void 0);var a=o?t+"__"+o:t;if(n.push(a),r)for(var s=0,u=Object.entries(r);s<u.length;s++){var c=u[s],d=c[0],l=c[1];"boolean"==typeof l||null==l?l&&n.push(a+"_"+d):n.push(a+"_"+d+"_"+l)}var h=n.join(" ");return e.lowerCase&&(h=h.toLowerCase()),i&&Array.isArray(i)&&(h=[h].concat(i).join(" ")),h}},Xo=function(t){var e,n,o,r=t.offsetWidth,i=t.offsetHeight;if(r>=75&&i>=32){var a=(n=(e={width:r,height:i}).width,o=e.height,{paddingX:Math.min(36,10+.5*Math.max(0,n-75)),paddingY:Math.min(17,4+.5*Math.max(0,o-32))}),s=a.paddingX,u=a.paddingY;Nt.style(t,{padding:u+"px "+s+"px"})}},tr=function(t){return t.Ready="READY",t.Failure="FAILURE",t}({}),er=function(t){return t.Update="UPDATE",t.Process="YAPAY_PROCESS",t.Lock="LOCK",t.Unlock="UNLOCK",t.Error="ERROR",t.Extra="EXTRA",t}({}),nr=n(688),or=n.n(nr);const rr=n.p+"_/yapay-simple-black-red.en.ddba3076.svg",ir=n.p+"_/yapay-simple-black-red.ccc8c125.svg",ar=n.p+"_/yapay-simple-white-red.en.fd449128.svg",sr=n.p+"_/yapay-simple-white-red.40eb6a45.svg";var ur='xmlns="http://www.w3.org/2000/svg" fill="none"',cr=function(t,e,n){var o=n?lr(t,e):dr(t,e);return"data:image/svg+xml;base64,"+btoa(o)},dr=function(t,e){return"ru"===e?"<svg "+ur+' width="59" height="21"><path fill="'+t+'" d="M52.33 4.2h-3.87l-2.43 6.25c-1.3 3.4-.15 5.59 2.06 5.59 1.92 0 3.25-1.3 4.1-3.12l-.02 2.3 2.43-.27L58.78 4.2H54.9l-2.45 6.31c-.5 1.29-1.14 2.08-2.03 2.08-.9 0-1.07-.77-.55-2.12zM31.69 17.56 36.9 4.2H26.15l-5.7 14.66 4.04-.46 4.29-11h3.01l-4.13 10.63zm3.04-5.96c-.98 2.9.37 5.52 3.65 5.52 4.68 0 7.48-5.99 7.48-9.32 0-2.5-1.36-4-4.02-4-2.89 0-4.64 1.9-5.82 4.77h3.72c.52-1.15 1.07-1.83 1.75-1.83.57 0 .76.57.76 1.26q0 .4-.1.92h-2.26l-.98 2.52h2.42c-.63 1.46-1.55 2.74-2.47 2.74-.83 0-.93-1.21-.43-2.58zm21.9-8.09.81-2.07H52l-.8 2.07z"/><rect width="19.52" height="19.52" x=".22" y=".74" fill="#F8604A" rx="9.76"/><path fill="#FFF" d="M11.36 16.36h2.04V4.66h-2.97c-2.98 0-4.55 1.53-4.55 3.79 0 1.8.86 2.86 2.4 3.96L5.6 16.36h2.21l2.97-4.43-1.03-.69C8.5 10.4 7.9 9.74 7.9 8.33c0-1.25.88-2.1 2.55-2.1h.9z"/></svg>':"<svg "+ur+' width="59" height="21"><path fill="'+t+'" d="M30.55 4.17c3.96 0 5.47 2.9 4.16 6.2-.91 2.32-2.86 3.78-6.63 4.1l-1.65.14-1.7 4.28-4.23.48 5.97-15.2zm10.32 0h3.23L44 16.7l-4.14.48.08-2.07-3.5.35-1.25 2.27-4.28.48 8.24-14.03zm9.25 4.42 3.52-4.42h4.26l-6.87 8.13-1.48 3.77-4.44.5 1.61-4.12-1.7-8.28h4.25zm-12.16 4.08 2.07-.15.14-3.9zM27.73 11.3l.73-.04c1.33-.07 1.97-.55 2.36-1.56.53-1.35-.02-2.24-1.14-2.24h-.43z"/><rect width="19.52" height="19.52" x=".22" y=".98" fill="#F8604A" rx="9.76"/><path fill="#FFF" d="M10.25 11.75c.57 1.25.76 1.68.76 3.18v2H8.97v-3.36L5.13 5.2h2.12zm2.5-6.54-2.48 5.66h2.07l2.5-5.66z"/></svg>'},lr=function(t,e){return"<svg "+ur+' width="104" height="28">'+("ru"===e?'<path fill="'+t+'" d="M90.59 9V5.2h12.81V9h-4.14v14.64H94.7V9zM79.43 23.64h-4.56V5.21h4.56v10.4l4.76-10.4h4.55v18.43H84.2v-10.4zM58.9 19.42q1 .13 1.46-.3.49-.47.62-1.68.15-1.37.26-4.27.12-2.94.2-7.96h11.38v18.43h-4.56V9h-2.93a149 149 0 0 1-.23 6.38q-.13 2.4-.39 3.8-.44 2.64-1.98 3.8t-3.84.64zM44.17 5.21h13.1v18.43h-4.55V9h-4v14.64h-4.55zM38.87 23.9a8 8 0 0 1-4.28-1.13 7.4 7.4 0 0 1-2.78-3.25 12 12 0 0 1-.95-5.07q0-2.95.98-5.07a7.4 7.4 0 0 1 2.78-3.27A8 8 0 0 1 39 4.98a8 8 0 0 1 3.55.72v3.78a7 7 0 0 0-2.96-.66q-4.07 0-4.07 5.63 0 2.84.98 4.22 1 1.37 3.09 1.37 1.6 0 2.96-.75v3.79a7 7 0 0 1-3.68.82"/>':'<path fill="'+t+'" d="M75.78 9V5.2H88.6V9h-4.15v14.64H79.9V9zM69.56 5.21h4.55v18.43h-4.55zM57.84 5.21h4.56v14.65h5.38v3.78h-9.94zM44.04 5.21h5.2q3.4 0 5.2 1.44 1.8 1.42 1.8 4.66 0 3.35-1.82 4.92-1.83 1.57-5.05 1.57h-.77v5.84h-4.56zm5.25 8.8q1.26 0 1.83-.61.57-.62.57-1.98 0-1.32-.62-1.86-.62-.57-1.9-.56h-.57v5.02zM35.88 23.9a10 10 0 0 1-4.66-1.06v-3.73a9 9 0 0 0 4.07 1.03q2.47 0 2.47-1.62 0-.72-.57-1.16a9 9 0 0 0-2.1-1.03 8.4 8.4 0 0 1-3.07-1.93q-1.16-1.23-1.16-3.5 0-1.98.9-3.3.9-1.3 2.4-1.95 1.48-.67 3.21-.67 1.11 0 2.22.23 1.13.23 1.77.57V9.5a8 8 0 0 0-3.55-.77q-2.45 0-2.45 1.5 0 .68.6 1.07.6.36 2.13.98 1.34.54 2.3 1.18.95.65 1.44 1.65.51.97.51 2.55 0 2.16-.93 3.55a5.6 5.6 0 0 1-2.36 2.04 8 8 0 0 1-3.17.64"/>')+'<mask id="a" width="26" height="29" x="-1" y="0" maskUnits="userSpaceOnUse" style="mask-type:alpha"><path fill="#fff" fill-rule="evenodd" d="m23.18 22.39.03.01-.03.03q.04.01.04.02l-.01.01.03.02-.03.02.03.01-.01.03.05.03q-.02 0-.02.02l.04.02-.01.01.02.01-.03.03.05.03-.02.01.05.03-.02.02h.02l-.02.03.04.03-.02.02.04.02-.01.01.01.01h.01l-.02.03.04.03-.02.02.04.02-.02.02.04.02-.02.02.04.02-.03.02.04.03v.01l.02.02-.02.02.03.02-.01.01.04.03-.01.01.03.02-.03.02.04.03-.02.02.03.03h-.02l.05.04-.01.01.02.01v.01l-.02.02.04.02-.02.01.04.03-.02.02.02.01.01.01.02.03-.02.02.04.03-.01.01.03.03v.01l.02.03-.01.02.02.02-.01.02.03.02-.01.02.03.02v.01l.03.03-.02.02.02.02-.01.02.03.03h-.01l.03.04-.32.29A14.03 14.03 0 1 1 4.67 3.5l.02-.01q.34-.3.72-.58h.02l.5-.37a14.2 14.2 0 0 1 18.24 1.78v.01l.03.04c.14.27.2 1.7-10.12 9.7l7.6 7.67 1.51.62z" clip-rule="evenodd"/></mask><g mask="url(#a)"><circle cx="14" cy="14" r="14" fill="url(#b)"/></g><path fill="url(#c)" d="M18.12 10.86c-1.94 1.6-4.48 3.6-7.81 6.09a32 32 0 0 0 7.8 6.11c2.5 1.3 4.48 1.56 5.41.72.94-.85.84-2.8-.29-5.34a31 31 0 0 0-5.1-7.58"/><path fill="#84eeb1" d="m18.34 10.68-1.05.86a29 29 0 0 1 4.78 7.13c1.09 2.49 1.06 3.74.71 4.05-.35.32-1.86.4-4.27-.88a29 29 0 0 1-7.14-5.7l-1.2.9.26.26c5.03 5.17 10.47 8.12 12.86 7.05l.23-.1a2 2 0 0 0 .5-.46c1.56-2.04-.81-7.55-5.54-12.94z"/><defs><radialGradient id="b" cx="0" cy="0" r="1" gradientTransform="rotate(103 13.91 2.34)scale(76 46)" gradientUnits="userSpaceOnUse"><stop offset=".04" stop-color="#0d9b43"/><stop offset=".17" stop-color="#48f56d"/><stop offset=".22" stop-color="#43ea68"/><stop offset=".31" stop-color="#37cb5a"/><stop offset=".43" stop-color="#239a44"/><stop offset=".48" stop-color="#1f9140"/><stop offset=".5" stop-color="#0ba446"/><stop offset=".73" stop-color="#085625"/><stop offset=".8" stop-color="#00421c"/></radialGradient><linearGradient id="c" x1="19.23" x2="14.06" y1="33.63" y2="-3.42" gradientUnits="userSpaceOnUse"><stop offset=".1" stop-color="#ff8475"/><stop offset=".37" stop-color="#e84e43"/><stop offset=".6" stop-color="#d6261f"/><stop offset=".79" stop-color="#cc0e08"/><stop offset=".9" stop-color="#c80500"/></linearGradient></defs></svg>'},hr=function(t){return t.replace(/[\r\n\t]+/gm,"").replace(/\s{2,}/g," ").replace(/ ?([{:;,!}]) ?/g,"$1").trim()},fr={black:"#000",white:"#FFF",dark:"#170023"},mr={black:"#000",white:"#FFF",dark:"#242424"},pr=function(t){t.target instanceof HTMLButtonElement&&function(t){var e=t.offsetWidth,n=t.offsetHeight;if(e>=Te&&n>=Re){var o=Math.min(36,10+.5*Math.max(0,e-Te)),r=Math.min(17,4+.5*Math.max(0,n-Re));return Nt.style(t,{padding:r+"px "+o+"px"})}Nt.style(t,{padding:"4px 2px"})}(t.target)},yr=function(t,e,n,o){var r=t.theme,i=t.width,a=t.style;return Object.assign({},function(t,e){var n,o,r,i;return{overflow:"hidden",flex:"1 0 auto","box-sizing":"border-box",width:t===Vt.MaxImportant?"100%":"","min-width":t===Vt.MaxImportant?"100%":"","max-width":t===Vt.MaxImportant?"100%":"",height:null!==(n=null==e?void 0:e.height)&&void 0!==n?n:"","min-height":null!==(o=null==e?void 0:e.height)&&void 0!==o?o:"","max-height":null!==(r=null==e?void 0:e.height)&&void 0!==r?r:"",cursor:"pointer","user-select":"none","border-width":"1px","border-style":"solid","border-radius":null!==(i=null==e?void 0:e.borderRadius)&&void 0!==i?i:"","background-position":"center","background-size":"contain, cover","background-repeat":"no-repeat","background-clip":"border-box","background-origin":"content-box, border-box",transition:"opacity 150ms linear,filter 150ms linear,background-color 150ms linear",transform:"translate3d(0,0,0)"}}(i,a),function(t,e,n,o){var r;if(!n)return{};var i=o?mr:fr,a=cr(i.white,e,o),s=cr(i.dark,e,o);return((r={})[qt.White]={"background-color":i.white,"background-image":"url("+s+")"},r[qt.WhiteOutlined]={"background-color":i.white,"border-color":"#000000","background-image":"url("+s+")"},r[qt.Black]={"background-color":i.dark,"background-image":"url("+a+")"},r)[n]}(0,e,r,o))},vr=.5;function gr(t,e){return We(n=t)&&1===n.nodeType?window.IntersectionObserver?function(t,e){var n=new IntersectionObserver((function(o){var r=o[0];r&&r.isIntersecting&&r.intersectionRatio>=vr&&(e("io"),n.unobserve(t))}),{threshold:[0,.25,.5,.75,1]});return n.observe(t),function(){return n.unobserve(t)}}(t,e):t.getBoundingClientRect?function(t,e){return Fn((function(){var e=t.getBoundingClientRect(),n=e.width,o=e.height,r=window.innerHeight-e.bottom,i=window.innerWidth-e.right;return Math.max(0,o+Math.min(0,e.top,r))/o*(Math.max(0,n+Math.min(0,e.left,i))/n)>=vr}),(function(){return e("raf")}))}(t,e):function(t,e){var n,o=function(){n=null,document.body&&document.body.contains?document.body===t||document.body.contains(t)?e("mount"):n=jn(o):e("timer")};return n=jn(o,0),function(){n&&clearTimeout(n)}}(t,e):function(){};var n}function br(t){return"none"!==Nt.getCssProp(t,"pointerEvents")}function wr(t){var e=t.parentElement;return e?br(e)?e:wr(e):null}function kr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Sr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Cr=function(t){function e(e){var n;return(n=t.call(this)||this)._watchInterval=void 0,n._registry=void 0,n.watcherId=void 0,n._watchInterval=e,n._registry=new Map,n}U(e,t);var n=e.prototype;return n.register=function(t){this._registry.set(t,!0),this.emit("change",{mounted:[t]}),this.watcher()},n.unregister=function(t){this._registry.delete(t)},n.watcher=function(){var t=this;this._registry.size>0&&!this.watcherId&&(this.watcherId=setInterval((function(){return t.action()}),this._watchInterval))},n.action=function(){for(var t,e=[],n=[],o=kr(this._registry);!(t=o()).done;){var r=t.value,i=r[0],a=r[1];i.isConnected!==a&&(this._registry.set(i,!a),a?n.push(i):e.push(i))}(e.length||n.length)&&this.emit("change",{mounted:e,unmounted:n})},_(e,[{key:"activeElements",get:function(){return Array.from(this._registry.entries()).filter((function(t){t[0];return t[1]})).map((function(t){var e=t[0];t[1];return e}))}}])}(Kt),xr=new(function(t){function e(){var e;return(e=t.call(this,100)||this)._dataRegistry=void 0,e._dataRegistry=new Map,e}U(e,t);var n=e.prototype;return n.registerButton=function(e,n){t.prototype.register.call(this,e),this._dataRegistry.set(e,n)},n.unregisterButton=function(e){t.prototype.unregister.call(this,e),this._dataRegistry.delete(e)},n.getData=function(t){return this._dataRegistry.get(t)},_(e,[{key:"values",get:function(){return Array.from(this._dataRegistry.values())}}])}(Cr));function Pr(t){Nt.show(t,"inline-block")}var Mr=function(){function t(t,e){this.buttonWatcher=void 0,this.mountingLimit=void 0,this.mountedTimes=void 0,this.logSent=void 0,this.mountedButton=void 0,this.mountedButtonHandler=void 0,this.buttonWatcher=t,this.mountingLimit=e,this.mountedTimes=0,this.logSent=!1}var e=t.prototype;return e.start=function(){var t=this;this.buttonWatcher.on("change",(function(){t.action()}))},e.registerWebButton=function(t,e){this.isApiAvailable&&this.buttonWatcher.registerButton(t,e)},e.unregisterWebButton=function(t){this.isApiAvailable&&this.buttonWatcher.unregisterButton(t)},e.dispatchClickEvent=function(){if(this.hasStickyButton&&this.mountedButton){var t,e=new Event("click",{bubbles:!0});if(br(this.mountedButton))this.mountedButton.dispatchEvent(e);else null===(t=wr(this.mountedButton))||void 0===t||t.dispatchEvent(e)}},e.removeStickyButton=function(){var t=this;return Vn(Ee.SdkRemountStickyButton),this.mountedButtonHandler?this.mountedButtonHandler.unmount().catch((function(t){V("stickyButtonRemoveError",t)})).then((function(){t.mountedButton&&Pr(t.mountedButton),t.mountedButtonHandler=void 0,t.mountedButton=void 0})):Promise.resolve()},e.addStickyButton=function(t){var e=this;this.mountedTimes>0&&Hn(Ee.SdkRemountStickyButton);var n=this.buttonWatcher.getData(t);return n?!this.hasStickyButton&&this.canStickyButtonMount&&t.id?this.api?this.api.mount(n,(function(){return e.dispatchClickEvent()})).then((function(n){!function(t){Nt.hide(t,!0)}(t),e.mountedButtonHandler=n,e.mountedButton=t,e.mountedTimes+=1})).catch((function(e){Pr(t),V("stickyButtonMountError",e)})):(V("Replace sticky button with button because of nonexisting api"),Pr(t),Promise.resolve()):(Pr(t),Promise.resolve()):(V("Replace sticky button with button because of nonexisting button data"),Pr(t),Promise.resolve())},e.action=function(){var t=this;if(this.isApiAvailable){var e=this.buttonWatcher.activeElements;if(1===e.length){var n=e[0];n!==this.mountedButton&&this.removeStickyButton().then((function(){return t.addStickyButton(n)}))}else this.removeStickyButton().then((function(){t.buttonWatcher.activeElements.forEach(Pr)}))}},_(t,[{key:"api",get:function(){var t,e;return null===(t=window.yandex)||void 0===t||null===(e=t.pay)||void 0===e?void 0:e.stickyButton}},{key:"isApiAvailable",get:function(){return Boolean(this.api)}},{key:"hasStickyButton",get:function(){return Boolean(this.mountedButton)&&Boolean(this.mountedButtonHandler)}},{key:"canStickyButtonMount",get:function(){return this.mountedTimes<this.mountingLimit||(this.logSent||(V("Trying to attach sticky button more than "+this.mountingLimit+" times"),this.logSent=!0),!1)}}])}(),Er=new Mr(xr,2),Ir=n(952),Br=n.n(Ir),Or=function(t){var e,n=Br()(t);rn(n)&&(n.order.items=null===(e=n.order.items)||void 0===e?void 0:e.map((function(t){return{amount:t.amount}})),delete n.order.total.label);return on(n)&&(n.cart={items:n.cart.items}),n},Tr=function(t){function e(e,n,o){var r;return(r=t.call(this)||this).frame=void 0,r.frameListener=void 0,r.frameEmitter=void 0,r.payment=void 0,r.buttonOptions=void 0,r.buttonStyles=void 0,r.onMessage=function(t){t&&t.type&&r.emit(t.type,t)},r.onPaymentUpdate=function(){r.frameEmitter&&r.frameEmitter.send({type:er.Update,paymentSheet:r.payment.sheet})},r.onPaymentProcess=function(){r.frameEmitter&&r.frameEmitter.send({type:er.Process})},r.onPaymentLock=function(){r.emit(go.PaymentLock,null),r.frameEmitter&&r.frameEmitter.send({type:er.Lock})},r.onPaymentUnlock=function(){r.emit(go.PaymentUnlock,null),r.frameEmitter&&r.frameEmitter.send({type:er.Unlock})},r.onPaymentError=function(){r.emit(go.PaymentError,null),r.frameEmitter&&r.frameEmitter.send({type:er.Error})},r.onPaymentExtraChange=function(t){var e=t.innerType,n=t.bnplSelected;r.frameEmitter&&r.frameEmitter.send({type:er.Extra,innerType:e,bnplSelected:n})},r.payment=e,r.buttonOptions=n,r.buttonStyles=o,r.subscribePayment(),r}U(e,t),e.create=function(t,n,o){return new e(t,n,o)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){try{if(this.frame)return;var e=this.buttonOptions,n=this.buttonStyles,o=this.payment,r=o.sheet,i=o.env,a=Or(r),s=Ln(he,this.payment.sessionId,{env:i,extra:{buttonOptions:e,paymentSheet:a,buttonStyles:n},merchantId:un(r)}),u=Dn(s);this.frame=De(s,{opacity:"0"}),Nt.add(t,this.frame),Nt.style(this.frame,{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",display:"block",width:"100%",height:"100%","pointer-events":"none","z-index":0}),this.connect(u)}catch(t){q("sdk-payment-method mount",t)}},n.unmount=function(){this.frame&&(Nt.remove(this.frame),this.frame=void 0),this.frameListener&&(this.frameListener.destroy(),this.frameListener=void 0),this.frameEmitter&&(this.frameEmitter.destroy(),this.frameEmitter=void 0),this.unsubscribePayment()},n.show=function(){this.frame&&Nt.animate(this.frame,{property:"opacity",from:"0",to:"1"})},n.connect=function(t){var e,n,o,r=this,i=new at({targetUrl:t});this.frameListener=new Wt(i),this.frameListener.on(this.onMessage);var a=null===(e=this.frame)||void 0===e?void 0:e.contentWindow;this.on(tr.Ready,(function(){var t,e,n;if(a!==(null===(t=r.frame)||void 0===t?void 0:t.contentWindow))if(H("SDK: Button remounted. Need to reconnect",{buttonType:r.buttonOptions.type}),a=null!==(e=null===(n=r.frame)||void 0===n?void 0:n.contentWindow)&&void 0!==e?e:null)try{r.frameEmitter=new Ot(i,a)}catch(t){q("SDK: Button Message Connection Emitter failed on remount",t)}else H("SDK: Button remount. No content window")})),this.frameEmitter=new Ot(i,null!==(n=null===(o=this.frame)||void 0===o?void 0:o.contentWindow)&&void 0!==n?n:void 0)},n.subscribePayment=function(){this.payment.on(go.PaymentUpdate,this.onPaymentUpdate),this.payment.on(go.PaymentProcess,this.onPaymentProcess),this.payment.on(go.PaymentLock,this.onPaymentLock),this.payment.on(go.PaymentUnlock,this.onPaymentUnlock),this.payment.on(go.PaymentError,this.onPaymentError),this.payment.on(go.PaymentExtra,this.onPaymentExtraChange)},n.unsubscribePayment=function(){this.payment.off(go.PaymentUpdate,this.onPaymentUpdate),this.payment.off(go.PaymentProcess,this.onPaymentProcess),this.payment.off(go.PaymentLock,this.onPaymentLock),this.payment.off(go.PaymentUnlock,this.onPaymentUnlock),this.payment.off(go.PaymentError,this.onPaymentError),this.payment.off(go.PaymentExtra,this.onPaymentExtraChange)},e}(Kt),Rr=Zo(ke,{lowerCase:!0}),Wr=Zo(Ce,{lowerCase:!0}),_r={type:zt.Pay,theme:qt.Black,width:Vt.Auto},Ar={disableStickyButton:!1,type:"button"},Ur=function(t){function e(e,n,o){var r;void 0===o&&(o={}),(r=t.call(this)||this).hasShadowRoot=!1,r.payment=void 0,r.parent=void 0,r.options=void 0,r.oldStyleElement=void 0,r.styleElement=void 0,r.buttonElement=void 0,r.backdropElement=void 0,r.paymentMethod=void 0,r.renderWatcherUnsubscribe=Qo(),r.resizeObserverUnsubscribe=Qo(),r.locked=!1,r.settings=void 0,r.onClick=function(t){r.locked||(Ao.sdk.buttonClick(r.payment.signalData),r.emit(Ht.Click,t))},r.onSdkPaymentMethodReady=function(t){Ue.set("hasNewPRA",t.hasNewPRA),r.showPaymentMethod(),po.of(r).mark(Yn.PersonalButtonMounted)},r.onSdkPaymentMethodFailure=function(){r.unmountPaymentMethod()},r.onPaymentLock=function(){r.locked=!0},r.onPaymentUnlock=function(){r.locked=!1};try{var i=n.sheet;r.payment=n,r.settings=function(t,e){var n=Object.assign({},e,t);return"boolean"!=typeof n.disableStickyButton&&void 0!==n.disableStickyButton&&(n.disableStickyButton=e.disableStickyButton,V('SDK: Invalid "disableStickyButton" option',{disableStickyButton:n.disableStickyButton}),console.warn('The "disableStickyButton" option should be boolean.')),n.type=te(n,"type",["button","submit","reset"],e.type,!1),n}(o,Ar),r.options=ee(e,_r),i&&vn(i)&&(r.settings.disableStickyButton=!0)}catch(t){throw z("SDK: Error create button",t),t}return r}U(e,t),e.create=function(t,n,o){return new e(t,n,o)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){var e=this;if(t){po.of(this).mark(Yn.SimpleButtonMountingStarted),po.ofSession(this.payment.sessionId).mark(Yn.FirstViewMountingStarted),this.parent&&this.unmount();var n=function(n){try{e.parent=t,e.hasShadowRoot=void 0!==window.ShadowRoot&&t instanceof ShadowRoot,e.mountStyles(),e.mountButton(n),po.of(e).mark(Yn.SimpleButtonMounted),po.of(e).mark(Yn.PersonalButtonMountingStarted),e.mountPaymentMethod(),e.registerStickyButton(),e.renderWatcherUnsubscribe=gr(e.buttonElement,(function(){Ao.sdk.buttonRender(e.payment.signalData)}))}catch(t){q("SDK: Button mount",t)}};gn(this.payment.sheet)?n(!0):n()}else V("SDK: Falsy parent on button mount",{fn:"Button.mount",message:"parent: "+t})},n.unmount=function(){this.parent=void 0,this.renderWatcherUnsubscribe(),this.unmountButton(),this.unmountStyles(),this.unmountPaymentMethod(),this.unregisterStickyButton()},n.setBackdrop=function(t){if(this.buttonElement&&this.backdropElement)this.backdropElement.style.height=t;else{var e=document.createElement("div");Nt.style(e,function(t){return{position:"relative",background:"transparent",overflow:"hidden",cursor:"pointer",width:"100%",height:t,flex:"0 0 "+t}}(t),!0),Nt.on(e,"click",this.onClick),e.setAttribute("class",Wr()),this.parent?Nt.add(this.parent,e,this.buttonElement):q("SDK: Backdrop has no parent element"),this.backdropElement=e}},n.registerStickyButton=function(){if(this.buttonElement){var t=this.payment,e=t.env,n=t.sessionId,o=t.sheet,r=this.options,i=r.type,a=r.theme,s=r.width;if(o&&!this.settings.disableStickyButton){var u={env:e,sessionId:n,merchant:On(o),buttonOptions:{type:i,theme:a,width:s},paymentMethodOptions:Bn(o),paymentType:o.type,orderTotal:{amount:hn(o),currency:o.currencyCode}};(on(o)||an(o))&&o.availablePaymentMethods&&(u.availablePaymentMethods=o.availablePaymentMethods),Er.registerWebButton(this.buttonElement,u)}}else V("SDK: Skip sticky button register")},n.unregisterStickyButton=function(){!this.settings.disableStickyButton&&this.buttonElement&&Er.unregisterWebButton(this.buttonElement)},n.mountButton=function(t){var e=this.options,n=e.type,o=e.theme,r=e.width,i=o===qt.Black?"dark":"light",a=Rr({type:n,theme:o,width:r,"theme-type":i}),s=document.createElement("button"),u=void 0!==this.payment.sheet.language?this.payment.sheet.language:"ru";Nt.style(s,yr(this.options,u,0,t),!0),s.setAttribute("id",Nn("yandexpay-button")),s.setAttribute("type",this.settings.type),s.setAttribute("aria-label","Yandex Pay"),s.setAttribute("class",a),this.settings.disableStickyButton||!Er.isApiAvailable||Er.hasStickyButton||Nt.hide(s,!0),this.parent?Nt.add(this.parent,s):z("SDK: Cannot mount button: has no parent element"),Nt.on(s,"click",this.onClick),Xo(s),this.resizeObserverUnsubscribe=function(t){if(window.ResizeObserver){var e=or()(40,pr),n=new ResizeObserver((function(t){return t.forEach(e)}));return n.observe(t,{box:"border-box"}),function(){return n.disconnect()}}return Qo()}(s),this.buttonElement=s},n.unmountButton=function(){this.buttonElement&&Nt.off(this.buttonElement,"click",this.onClick),this.backdropElement&&Nt.off(this.backdropElement,"click",this.onClick),this.buttonElement&&Nt.remove(this.buttonElement),this.resizeObserverUnsubscribe()},n.mountStyles=function(){var t,n,o,r,i=document.createElement("style");i.setAttribute("type","text/css"),i.textContent=(t={assetsUrl:se,baseClass:ke},n=this.payment.sheet.language,o=t.assetsUrl,r=t.baseClass,void 0===n&&(n="ru"),hr("\n  ."+r+" {\n    position: relative;\n    display: inline-block;\n    box-sizing: border-box;\n    height: 54px;\n    min-width: 282px;\n    min-height: 40px;\n    padding: 14px 36px;\n    overflow: hidden;\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border-width: 1px;\n    border-style: solid;\n    border-color: transparent;\n    border-radius: 8px;\n    user-select: none;\n    cursor: pointer;\n    transition: opacity 150ms linear, filter 150ms linear, background-color 150ms linear;\n\n    transform: translate3d(0, 0, 0);\n  }\n\n  ."+r+":focus {\n    outline: none;\n    border-color: transparent;\n    box-shadow: 0 0 0 3px rgb(255 56 21 / 50%);\n  }\n\n  ."+r+"_theme_white,\n  ."+r+"_theme_white-outlined {\n    background-color: #ffffff;\n  }\n\n  ."+r+"_theme_white-outlined {\n    border-color: #000000;\n  }\n\n  ."+r+"_theme-type_light:hover,\n  ."+r+"_theme-type_light:active {\n    filter: brightness(0.95);\n  }\n\n  ."+r+"_theme_black {\n    background-color: #000000;\n  }\n\n  ."+r+"_theme-type_dark:hover,\n  ."+r+"_theme-type_dark:active {\n    opacity: 0.8;\n  }\n\n  ."+r+"_theme-type_light {\n    background-image: url('"+o+("ru"===n?ir:rr)+"');\n  }\n\n  ."+r+"_theme-type_dark {\n    background-image: url('"+o+("ru"===n?sr:ar)+"');\n  }\n\n  ."+r+" iframe,\n  ."+r+"::before {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 0;\n  }\n\n  ."+r+" iframe {\n    position: 'absolute';\n    top: '0';\n    right: '0';\n    bottom: '0';\n    left: '0';\n    border: '0';\n    display: 'block';\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    z-index: 0;\n  }\n\n  ."+r+"_width_max {\n    width: 100%;\n    min-width: 100px;\n  }\n\n  ."+r+"::before {\n    content: '';\n    z-index: 1;\n  }\n"));var a=document.createElement("style");a.setAttribute("type","text/css"),a.textContent=function(t){var e=t.baseClass,n=t.backdropClass;return hr("\n  ."+e+" {\n    display: 'inline-block';\n    position: 'relative';\n    height: 54px;\n    min-width: 282px;\n    min-height: 40px;\n    padding: 0;\n    border-radius: 8px;\n  }\n\n  ."+e+":focus {\n    outline: none;\n    border-color: transparent;\n    box-shadow: 0 0 0 3px rgb(255 56 21 / 50%);\n  }\n\n  ."+n+":hover+."+e+"_theme-type_light,\n  ."+e+"_theme-type_light:hover,\n  ."+e+"_theme-type_light:active {\n    filter: brightness(0.95);\n  }\n\n  ."+n+":hover+."+e+"_theme-type_dark,\n  ."+e+"_theme-type_dark:hover,\n  ."+e+"_theme-type_dark:active {\n    filter: brightness(0.8);\n    opacity: 1;\n  }\n\n  ."+e+" iframe,\n  ."+e+"::before {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 0;\n  }\n\n  ."+e+"_width_max {\n    width: 100%;\n    min-width: 100px;\n  }\n\n  ."+e+"::before {\n    content: '';\n    z-index: 1;\n  }\n")}({baseClass:ke,backdropClass:Ce}),this.hasShadowRoot?(this.oldStyleElement=i,this.styleElement=a,this.parent?(Nt.add(this.parent,i),Nt.add(this.parent,a)):V("SDK: Button cannot mount styles: has no parent element")):e.isMainStylesMounted||(document.head.appendChild(i),document.head.appendChild(a),e.isMainStylesMounted=!0)},n.unmountStyles=function(){this.oldStyleElement&&Nt.remove(this.oldStyleElement),this.styleElement&&Nt.remove(this.styleElement)},n.mountPaymentMethod=function(){if(this.buttonElement&&this.buttonElement.isConnected){var t,e,n=(t=this.buttonElement,e=getComputedStyle(t),{border:parseInt(e.borderRadius||e.borderTopRightRadius,10),height:parseInt(e.height,10)});this.paymentMethod=Tr.create(this.payment,this.options,n),this.paymentMethod.mount(this.buttonElement),this.paymentMethod.on(tr.Ready,this.onSdkPaymentMethodReady),this.paymentMethod.on(tr.Failure,this.onSdkPaymentMethodFailure),this.paymentMethod.on(go.PaymentLock,this.onPaymentLock),this.paymentMethod.on(go.PaymentUnlock,this.onPaymentUnlock)}else V("SDK: Skip payment-method mount on unconnected button")},n.unmountPaymentMethod=function(){this.paymentMethod&&this.paymentMethod.destroy()},n.showPaymentMethod=function(){this.paymentMethod&&this.paymentMethod.show()},e}(Kt);Ur.isMainStylesMounted=!1;var Lr={},Dr=function(t){return Lr[t.sessionId]},jr=!1,Fr="__YPMSG__",Nr=3e4,Kr=new Kt;function zr(t){var e="string"==typeof t.data?b(t.data,{}):t.data;if(e&&e.source===Fr)return e}function qr(t){if(!t||"function"!=typeof t.postMessage)throw new Error("RPC-Bell: Invalid target object")}function Vr(t){jr||(jr=!0,window.addEventListener("message",(function(t){var e=zr(t);e&&Kr.emit(e.route,{message:e,ports:t.ports})})));var e=t.target,n=t.origin,o=void 0===n?"*":n,r=t.scope,i=void 0===r?"*":r,a=t.reqTimeout,s=void 0===a?Nr:a;qr(e);var u=[],c=function(t,e){return e+":"+t+":"+i},d=function(t){return"res:"+t+":"+i};function l(t,e,n){return{source:Fr,route:t,id:e,payload:n}}function h(t,n){qr(e),e.postMessage(t,o,n)}function f(t,e,n){var o,r,i=c(t,n?"req":"event"),a=d(t),f=C(8),m=l(i,f,e);if(n){var p=new MessageChannel;r=[p.port2];var y=function(){p.port1.onmessage=null,p.port1.close(),clearTimeout(o),u=u.filter((function(t){return t!==y}))};s>0&&(o=setTimeout((function(){y(),n.error(new Error("PmRequestTimeout"))}),s)),p.port1.onmessage=function(t){var e=zr(t);e&&function(t){var e=t.message;e.route===a&&e.id===f&&(y(),n.success(e.payload))}({message:e})},u.push(y)}h(m,r)}return{emit:function(t,e){f(t,e)},listen:function(t,e){var n=c(t,"event"),o=Kr.on(n,(function(t){var n=t.message;e(n.payload)}));u.push(o)},request:function(t,e){return new Promise((function(n,o){try{f(t,e,{success:n,error:o})}catch(t){o(t)}}))},handle:function(t,e){var n=c(t,"req"),o=d(t),r=Kr.on(n,(function(t){var n=t.message,r=(t.ports||[])[0],i=!1,a=function(t){if(!i){i=!0;var e=l(o,n.id,t);r?(qr(r),r.postMessage(e)):h(e)}},s=function(){return a()},u=e(n.payload,(function(t){return a(t)}));u&&"function"==typeof u.then?u.then(s,s):s()}));u.push(r)},destroy:function(){u.forEach((function(t){return t()})),u=[]}}}var Hr=function(t,e){return e===Gt.None?"0px":Number.isFinite(t)?t+"px":"8px"},Yr=function(t){var e=t.borderRadius,n=t.padding;return{width:"100%",height:"0",position:"relative",display:"inline-block","box-sizing":"border-box",overflow:"hidden","border-radius":Hr(e,n),transform:"translate3d(0, 0, 0)"}},$r=function(t,e,n){var o=t.widgetTheme===Xt.Dark?"#ffffff14":"#00000014",r={height:e+"px","min-width":"180px","border-color":"transparent","border-width":"0 1px"};return e>0&&(r.border="1px solid "+o),n&&(r["margin-top"]=n+"px",r["margin-bottom"]=n+"px"),r},Gr=function(t,e,n){var o={height:e+"px","min-width":"300px",border:"none"};return n&&(o["margin-top"]=n+"px",o["margin-bottom"]=n+"px"),o},Jr=function(t,e,n){var o={height:e+"px","min-width":"311px",border:"none"};return n&&(o["margin-top"]=n+"px",o["margin-bottom"]=n+"px"),o},Qr=function(){return{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",width:"100%",height:"100%","z-index":"1"}},Zr=function(t){return t.Ready="ready",t.Resize="resize",t.Close="close",t.PaymentUpdate="payment-update",t.ReadyToShowInfo="ready-to-show-info",t.MountingStart="mounting-start",t.ShowSplitInfo="show-split-info",t.ShowCashbackInfo="show-cashback-info",t.RenderSplitTooltip="render-split-tooltip",t.RenderCashbackTooltip="render-cashback-tooltip",t.RenderSplitModal="render-split-modal",t.RenderCashbackModal="render-cashback-modal",t.CheckoutButtonClick="checkout-button-click",t}({}),Xr=Zo(Se,{lowerCase:!0}),ti={widgetType:$t.Info,borderRadius:16,widgetTheme:Xt.Light};function ei(t,e,n){if(t)return function(t,e,n){var o={},r=C(8),i={sessionId:n.sessionId,merchantId:un(n.sheet),amount:hn(n.sheet),currencyCode:fn(n.sheet),theme:e.widgetTheme,borderRadius:e.borderRadius,paymentMethods:yn(n.sheet),isPrepayment:e.isPrepayment},a=function(){};try{po.of(o).mark(Yn.InfoWidget_MountingStarted),po.ofSession(n.sessionId).mark(Yn.FirstViewMountingStarted);var s=function(){var t=document.createElement("div"),n=Yr(Object.assign({},e));return Nt.attrs(t,{class:Xr()}),Nt.style(t,Object.assign({},n,{transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),u=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe"),a="ya-frame-"+C(8);return Nt.style(o,Qr()),Nt.attrs(o,{class:Xr("frame"),src:Ln(me,t,{env:e,rpcs:r,extra:i,merchantId:un(n.sheet)}),name:a}),o}();Nt.add(t,s),Nt.add(s,u);var c=function(t,a){if(!a.contentWindow)throw new Error("Unable to get frame.contentWindow");var s=Vr({target:a.contentWindow,scope:r});return s.listen(Zr.Ready,(function(){po.of(o).mark(Yn.InfoWidget_Mounted)})),s.listen(Zr.Resize,(function(n){Nt.style(t,Gr(e,n.height,n.offsetY))})),n.on(go.PaymentUpdate,(function(){i.amount=hn(n.sheet),i.currencyCode=fn(n.sheet),s.emit(Zr.PaymentUpdate,Object.assign({},i))})),function(){return s.destroy()}}(s,u);a=function(){c(),Nt.remove(s)}}catch(t){q("SDK: InfoWidget mount",t)}return{destroy:a}}(t,ne(e,ti),n);V("SDK: Falsy parent on widget-info mount",{fn:"InfoWidget.mount",message:"parent: "+t})}var ni,oi,ri,ii,ai=(ni=window,void 0===oi&&(oi=5),void 0===ri&&(ri=250),ii=new Promise((function(t){var e=setInterval((function(){try{var n,o,r,i,a,s=(null===(n=ni.Ya)||void 0===n?void 0:n.Metrika)||(null===(o=ni.Ya)||void 0===o?void 0:o.Metrika2),u=null==s||null===(r=s.counters)||void 0===r||null===(i=r.call(s))||void 0===i||null===(a=i[0])||void 0===a?void 0:a.id;if(oi-=1,void 0!==u)return clearInterval(e),t(u);if(oi<=0)return clearInterval(e),t(null)}catch(t){Y("merchantMetrika error",t)}}),ri)})),{reachGoal:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ii.then((function(t){var n,o;null!==t&&(null===(n=(o=window).ym)||void 0===n||n.call.apply(n,[o,t,"reachGoal"].concat(e)))}))}}),si=function(t){return t.Click="click",t}(si||{}),ui=function(t){function e(){var e;return(e=t.call(this)||this).element=void 0,e.onClick=function(){e.emit(si.Click,void 0)},e.element=document.createElement("div"),e.mount(),e}U(e,t),e.getInstance=function(){return this.instance?this.instance:new e};var n=e.prototype;return n.mount=function(){Nt.style(this.element,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"},!0),Nt.add(document.body,this.element),Nt.on(this.element,"click",this.onClick)},n.show=function(){Nt.style(this.element,{display:"block"})},n.hide=function(){Nt.style(this.element,{display:"none"})},n.destroy=function(){t.prototype.destroy.call(this),Nt.off(this.element,"click",this.onClick),Nt.remove(this.element)},e}(Kt);ui.Events=si,ui.instance=void 0;var ci,di,li,hi,fi,mi,pi,yi,vi,gi,bi,wi,ki,Si,Ci=function(t){return t[t.hidden=0]="hidden",t[t.tooltip=1]="tooltip",t[t.drawer=2]="drawer",t[t.modal=3]="modal",t}({}),xi=function(t){return t[t.block=0]="block",t[t.frame=1]="frame",t[t.line=2]="line",t[t.arrow=3]="arrow",t}({}),Pi=function(t){return t[t.light=100]="light",t[t.dark=101]="dark",t}({}),Mi=(ci=null,di=Ci.hidden,{show:function(t,e){ci=e,di=t},hide:function(){ci=null,di=Ci.hidden},get active(){return ci},get mode(){return di}}),Ei=null,Ii=function(){return Ei||(Ei={x:0,y:0,w:window.innerWidth,h:window.innerHeight,sx:window.scrollX,sy:window.scrollY}),Ei},Bi=function(){Ei=null},Oi=function(t){var e,n,o=t.getBoundingClientRect(),r=Ii();return{x:o.x+(null!==(e=r.sx)&&void 0!==e?e:0),y:o.y+(null!==(n=r.sy)&&void 0!==n?n:0),w:o.width,h:o.height}},Ti=function(t,e){var n=Object.assign({},t);for(var o in e)if(void 0!==n[o])for(var r in n[o]=Object.assign({},n[o]),e[o])n[o][r]=e[o][r];return n},Ri=function(t,e){var n,o,r=Ii(),i={x:t.x+t.w/2-e.w/2,y:t.y+t.h};return i.r=i.y+e.h>r.h+(null!==(n=r.sy)&&void 0!==n?n:0),i.x=Math.max(i.x,null!==(o=r.sx)&&void 0!==o?o:0),i.sy=i.r?t.h:0,i},Wi="2147483647",_i=((fi={})[xi.block]={position:"fixed",top:"0px",left:"0px",bottom:"0px","z-index":Wi,display:"flex","flex-direction":"column",width:"100%","justify-content":"flex-end",background:"#00000000",cursor:"pointer"},fi[xi.frame]={"border-radius":"24px 24px 0 0",width:"100%",transform:"translateY(100%)"},fi[xi.line]={position:"relative","z-index":"1",display:"flex",width:"100%",height:"12px","justify-content":"center","align-items":"center",transform:"translateY(100%)",opacity:"0"},fi[Pi.light]=((li={})[xi.frame]={background:"#fff"},li[xi.line]={color:"#000"},li),fi[Pi.dark]=((hi={})[xi.frame]={background:"#000"},hi[xi.line]={color:"#fff"},hi),fi),Ai=((mi={})[xi.block]={background:"#00000080",transition:"background 150ms"},mi[xi.frame]={transform:"translateY(0%)",transition:"transform 150ms, height 150ms"},mi[xi.line]={opacity:"1",transition:"opacity 150ms cubic-bezier(0.9, 0.03, 0.7, 0.2)"},mi),Ui=((pi={})[xi.block]={background:"#00000000",transition:"background 150ms"},pi[xi.frame]={transform:"translateY(100%)",transition:"transform 150ms"},pi[xi.line]={opacity:"0",transition:""},pi),Li=(yi=null,vi=!1,{show:function(t){Bi(),t.clear(),t.setOverflow(),t.draw(_i),t.nextTick((function(){t.draw(Ai)})),vi=!0,t.afterAnimation((function(){return vi=!1}))},hide:function(t,e){t.nextTick((function(){t.draw(Ui),t.afterAnimation((function(){t.resetOverflow(),e()}))}))},enable:function(t,e){var n,o=t.$(xi.block),r=t.$(xi.frame);null===(n=yi)||void 0===n||n();var i=function(t){t.preventDefault(),t.stopPropagation()};return yi=function(t){t&&i(t),vi?vi=!1:(Nt.off(r,"touchend",i,{capture:!0}),Nt.off(r,"mouseup",i,{capture:!0}),yi&&(Nt.off(o,"touchend",yi),Nt.off(o,"mouseup",yi)),e(),yi=null)},Nt.on(r,"touchend",i,{capture:!0}),Nt.on(o,"touchend",yi),Nt.on(r,"mouseup",i,{capture:!0}),Nt.on(o,"mouseup",yi),yi}}),Di=((wi={})[xi.block]={position:"fixed",top:"0px",left:"0px","z-index":Wi,display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%",opacity:"0",background:"#00000080"},wi[xi.frame]={border:"0px solid transparent","border-radius":"24px",transform:"translateY(-5%)"},wi[xi.line]={display:"none"},wi[xi.arrow]={display:"none"},wi[Pi.light]=((gi={})[xi.frame]={background:"#fff"},gi),wi[Pi.dark]=((bi={})[xi.frame]={background:"#000"},bi),wi),ji=((ki={})[xi.block]={opacity:"1",transition:"opacity 150ms"},ki[xi.frame]={transform:"translateY(0%)",transition:"transform 150ms"},ki),Fi=((Si={})[xi.block]={opacity:"0",transition:"opacity 150ms"},Si[xi.frame]={transform:"translateY(-5%)",transition:"transform 150ms"},Si),Ni=function(){var t=null,e=!1;return{show:function(t){Bi(),t.clear(),t.setOverflow(),t.draw(Di),t.nextTick((function(){t.draw(ji)})),e=!0,t.afterAnimation((function(){return e=!1}))},hide:function(t,e){t.nextTick((function(){t.draw(Fi),t.afterAnimation((function(){t.resetOverflow(),e()}))}))},enable:function(n,o){var r,i=n.$(xi.block),a=n.$(xi.frame);null===(r=t)||void 0===r||r();var s=function(t){t.stopPropagation()};return t=function(){e?e=!1:(Nt.off(a,"touchend",s,{capture:!0}),Nt.off(a,"mouseup",s,{capture:!0}),t&&(Nt.off(i,"touchend",t),Nt.off(i,"mouseup",t)),t=null,o())},Nt.on(a,"touchend",s,{capture:!0}),Nt.on(i,"touchend",t),Nt.on(a,"mouseup",s,{capture:!0}),Nt.on(i,"mouseup",t),t}}}(),Ki=n(477),zi=n.n(Ki);function qi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Vi(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vi(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Hi,Yi,$i,Gi,Ji,Qi=function(){var t,e,n,o,r,i=Pi.light,a={w:0,h:0},s=((t={})[xi.frame]=c("iframe"),t[xi.block]=c("div"),t[xi.line]=c("div",'<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="35" height="4"><rect fill="currentColor" fill-opacity="0.2" width="34" height="4" rx="2" /></svg>'),t[xi.arrow]=c("div",'<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="8"><path fill="currentColor" d="m12 0-.4.8-.5 1A12 12 0 0 1 1 8H0h24-1.1A12 12 0 0 1 12.4.8L12 0Z" /></svg>'),t),u=((e={})[xi.block]={position:"absolute",top:"-9999px",left:"-9999px","-webkit-tap-highlight-color":"transparent"},e[xi.frame]={border:"none"},e[xi.arrow]={display:"none"},e[xi.line]={display:"none"},e);function c(t,e){var n=document.createElement(t);return Nt.attrs(n,{id:"yndx-"+C(5)}),e&&(n.innerHTML=e),n}function d(t){return s[t]}function l(){clearTimeout(o),cancelAnimationFrame(n);for(var t=0,e=Object.entries(s);t<e.length;t++){var r=e[t][1];r.removeAttribute("style"),r.removeAttribute("class")}f(u),h(a),m()}function h(t){a=t,Nt.style(d(xi.frame),{width:void 0!==t.w?t.w+"px":"auto",height:void 0!==t.h?t.h+"px":"auto"})}function f(t){void 0===t&&(t={});for(var e,n=qi(Object.values(xi).filter((function(t){return"number"==typeof t})));!(e=n()).done;){var o=e.value;Nt.style(d(o),Object.assign({},zi()(o,{},t),He()([i,o],{},t)))}}function m(){r&&(Nt.style(document.body,r),r=null)}return{$:d,mount:function(t,e){var n=d(xi.block),o=d(xi.frame);return Nt.attrs(o,Object.assign({src:t},e?{name:e}:{})),n.className="",Nt.add(n,d(xi.arrow)),Nt.add(n,d(xi.line)),Nt.add(n,o),Nt.add(document.body,n),l(),o},clear:l,theme:function(t){void 0===t&&(t="");var e=t.toLowerCase();"light"===e&&(i=Pi.light),"dark"===e&&(i=Pi.dark)},resize:h,draw:f,hide:function(){var t;f(((t={})[xi.block]=u[xi.block],t))},nextTick:function(t){n=requestAnimationFrame(t)},afterAnimation:function(t){o=setTimeout(t,250)},setOverflow:function(){if(!r){var t=function(){var t=getComputedStyle(document.body),e=t.overflow,n=t.paddingRight,o={original:{overflow:"visible"===e?"":e,"padding-right":""},hidden:{overflow:"hidden","padding-right":""}},r=window.innerWidth-document.documentElement.clientWidth;if(r>0){var i=Number(n)||0;o.original["padding-right"]=0===i?"":i+"px",o.hidden["padding-right"]=i+r+"px"}return o}(),e=t.hidden,n=t.original;r=n,Nt.style(document.body,e)}},resetOverflow:m}},Zi=(($i={})[xi.block]={position:"absolute","z-index":Wi,display:"flex","flex-direction":"column",opacity:"0",transform:""},$i[xi.frame]={display:"block","box-sizing":"content-box","border-radius":"24px","box-shadow":"0px 6px 58px 0px rgba(33, 34, 36, 0.17)",overflow:"hidden"},$i[xi.arrow]={position:"relative","z-index":"1",display:"flex","justify-content":"center","align-items":"center",height:"8px",width:"100%",order:"-1",transform:""},$i[xi.line]={display:"none"},$i[Pi.light]=((Hi={})[xi.frame]={background:"#fff"},Hi[xi.arrow]={color:"#fff"},Hi),$i[Pi.dark]=((Yi={})[xi.frame]={background:"#000"},Yi[xi.arrow]={color:"#000"},Yi),$i),Xi=((Gi={})[xi.block]={opacity:"1",transition:"opacity 150ms"},Gi),ta=((Ji={})[xi.block]={opacity:"0",transition:"opacity 150ms"},Ji);function ea(t){var e,n,o,r;return{position:((e={})[xi.block]={top:t.y+"px",left:t.x+"px"},e),show:t.r?Ti(Zi,(o=null!==(n=t.sy)&&void 0!==n?n:0,(r={})[xi.block]={transform:"translateY(calc(-100% - "+o+"px))"},r[xi.arrow]={transform:"rotate(180deg)",order:"100"},r)):Zi,showAnimation:Xi,hideAnimation:ta}}var na,oa,ra,ia,aa,sa,ua,ca,da,la,ha=(na=null,oa=new WeakMap,ra=null,{show:function(t,e){ra=t,Bi(),e.clear();var n=e.$(xi.block),o=ea(Ri(Oi(t),Oi(n)));oa.set(t,o.hideAnimation),e.draw(o.show),e.draw(o.position),e.nextTick((function(){e.draw(o.showAnimation)}))},move:function(t,e){if(t===ra){Bi();var n=e.$(xi.block),o=ea(Ri(Oi(t),Oi(n)));e.draw(o.position)}},hide:function(t,e,n){t===ra&&e.nextTick((function(){e.draw(oa.get(t)||ta),e.afterAnimation((function(){return n()})),oa.delete(t)}))},enable:function(t,e,n){var o,r=e.$(xi.block);null===(o=na)||void 0===o||o();var i=t,a=t,s=!1,u=function(t){var e=t.target,n=t.type;a=e,"touchend"===n&&(s=!0)},c=function(t){var e=t.target,n=t.type;setTimeout((function(){var t;("touchend"===n&&!s||"mouseout"===n&&a===e)&&(null===(t=na)||void 0===t||t())}),50)};return na=function(){n(),i&&Nt.off(i,"mouseout",c),Nt.off(r,"mouseout",c),Nt.off(r,"mouseover",u),Nt.off(r,"touchend",u),Nt.off(t,"mouseover",u),Nt.off(t,"touchend",u),Nt.off(document.body,"touchend",c),i=null,a=null,na=null},Nt.on(document.body,"touchend",c),Nt.on(t,"mouseout",c),Nt.on(r,"mouseout",c),Nt.on(r,"mouseover",u),Nt.on(r,"touchend",u),Nt.on(t,"mouseover",u),Nt.on(t,"touchend",u),na}}),fa=function(){var t=Qi(),e=function(){var t=new WeakMap;function e(e){var n=t.get(e);n&&(n(),t.delete(e))}return{connect:function(n,o){e(n);var r=!0,i=function(){r=!0},a=function(){r=!1},s=function(t){t.preventDefault(),Mi.active!==n&&r&&o()};Nt.on(n,"mouseover",s),Nt.on(n,"click",s),Nt.on(n,"touchend",s),Nt.on(n,"touchstart",i),Nt.on(n,"touchmove",a),Nt.on(n,"touchcancel",a),t.set(n,(function(){Nt.off(n,"mouseover",s),Nt.off(n,"click",s),Nt.off(n,"touchend",s),Nt.off(n,"touchstart",i),Nt.off(n,"touchcancel",a),Nt.off(n,"touchmove",a)}))},disconnect:e}}();return{mount:t.mount,theme:t.theme,connect:e.connect,disconnect:e.disconnect,resize:function(e){t.resize(Mi.mode===Ci.drawer?{h:e.h}:e),Mi.mode===Ci.tooltip&&Mi.active&&ha.move(Mi.active,t)},showTooltip:function(e,n){return Mi.show(Ci.tooltip,e),ha.show(e,t),ha.enable(e,t,(function(){Mi.hide(),ha.hide(e,t,t.hide),null==n||n()}))},showDrawer:function(e,n){return Mi.show(Ci.drawer,null),Li.show(t),Li.enable(t,(function(){Mi.hide(),Li.hide(t,t.hide),null==n||n()}))},showModal:function(e){return Mi.show(Ci.modal,null),Ni.show(t),Ni.enable(t,(function(){Mi.hide(),Ni.hide(t,t.hide),null==e||e()}))}}},ma=function(){return dt()&&window.innerWidth<=500},pa=function(t,e){return t?{h:window.innerHeight-50}:{w:Math.min(520,window.innerWidth-50),h:Math.min(730,window.innerHeight-50,(null==e?void 0:e.height)||1/0)}},ya=(ia=fa(),aa=function(t){return t()},sa=!1,ua=null,ca=ma(),da=function(){},la=function(){var t=function(){return da=function(){}};ca=ma(),da=ca?ia.showDrawer(document.body,t):ia.showModal(t)},{mount:function(t){if(!ua&&!sa){po.of(ya).mark(Yn.SimpleWidgetModal_MountingStarted);var e=C(8),n=Ln(ve,null,{rpcs:e,env:t}),o=ia.mount(n,"ya-modal-"+C(8));if(!o.contentWindow)return void(sa=!0);(ua=Vr({target:o.contentWindow,scope:e})).listen(Zr.Close,(function(){return da()})),ua.listen(Zr.Resize,(function(t){ia.resize(pa(ca,t))})),ua.listen(Zr.Ready,(function(){po.of(ya).mark(Yn.SimpleWidgetModal_Mounted),ia.resize(pa(ca)),ya.onReady=aa}))}},showCashbackModal:function(t){ua&&(ia.theme(t.theme),ua.request(Zr.RenderCashbackModal,t).then(la))},showSplitModal:function(t){ua&&(ia.theme(t.theme),ua.request(Zr.RenderSplitModal,t).then(la))},onReady:function(t){ua&&ua.listen(Zr.Ready,(function(){return t()}))},onCheckout:function(t){ua&&ua.listen(Zr.CheckoutButtonClick,(function(){return t()}))}}),va=Zo(Se,{lowerCase:!0}),ga={widgetType:$t.Simple,borderRadius:16,widgetTheme:Xt.Light};function ba(t,e,n,o){var r={},i=C(8),a={sessionId:n.sessionId,merchantId:un(n.sheet),amount:hn(n.sheet),currencyCode:fn(n.sheet),theme:e.widgetTheme,showCheckout:Boolean(o)};var s=function(){};try{po.of(r).mark(Yn.SimpleWidget_MountingStarted),po.ofSession(n.sessionId).mark(Yn.FirstViewMountingStarted);var u=function(){var t=document.createElement("div"),n=Yr(Object.assign({},e,{borderWidth:"1px"}));return Nt.attrs(t,{class:va()}),Nt.style(t,Object.assign({},n,{"border-color":"transparent","border-width":"0 1px",transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),c=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe"),r="ya-frame-"+C(8);return Nt.style(o,Qr()),Nt.attrs(o,{class:va("frame"),src:Ln(ye,t,{env:e,rpcs:i,extra:a,merchantId:un(n.sheet)}),name:r}),o}();Nt.add(t,u),Nt.add(u,c);var d=function t(s,u){if(!u.contentWindow)throw new Error("Unable to get frame.contentWindow");var c=u.contentWindow,d=Vr({target:u.contentWindow,scope:i});return d.listen(Zr.MountingStart,(function(){c!==u.contentWindow&&(H("SDK: Widget remounted. Need to reconnect",{widgetType:e.widgetType,buttonType:e.buttonType}),d.destroy(),t(s,u),c=u.contentWindow)})),o&&ya.onCheckout(o),d.listen(Zr.Ready,(function(){po.of(r).mark(Yn.SimpleWidget_Mounted),ya.onReady((function(){return d.emit(Zr.ReadyToShowInfo)}))})),d.listen(Zr.Resize,(function(t){Nt.style(s,$r(e,t.height,t.offsetY))})),d.listen(Zr.ShowSplitInfo,(function(){return ya.showSplitModal(a)})),d.listen(Zr.ShowCashbackInfo,(function(){return ya.showCashbackModal(a)})),n.on(go.PaymentUpdate,(function(){a.amount=hn(n.sheet),a.currencyCode=fn(n.sheet),d.emit(Zr.PaymentUpdate,Object.assign({},a))})),function(){return d.destroy()}}(u,c);s=function(){d(),Nt.remove(u)}}catch(t){q("SDK: SimpleWidget mount",t)}return{destroy:s}}function wa(t,e,n,o){if(t)return ya.mount(n.env),ba(t,ne(e,ga),n,o);V("SDK: Falsy parent on widget-info mount",{fn:"SimpleWidget.mount",message:"parent: "+t})}var ka=function(){return dt()&&window.innerWidth<=500},Sa=function(t,e){return t?{h:window.innerHeight-50}:{w:Math.min(520,window.innerWidth-50),h:Math.min(730,window.innerHeight-50,(null==e?void 0:e.height)||1/0)}},Ca=function(){var t=fa(),e=function(t){return t()},n=!1,o=null,r=ka(),i=function(){},a=function(){var e=function(){return i=function(){}};r=ka(),i=r?t.showDrawer(document.body,e):t.showModal(e)};return{mount:function(a){if(!o&&!n){po.of(Ca).mark(Yn.UltimateWidget_MountingStarted);var s=C(8),u=Ln(ve,null,{rpcs:s,env:a}),c=t.mount(u,"ya-modal-"+C(8));if(!c.contentWindow)return void(n=!0);(o=Vr({target:c.contentWindow,scope:s})).listen(Zr.Close,(function(){return i()})),o.listen(Zr.Resize,(function(e){t.resize(Sa(r,e))})),o.listen(Zr.Ready,(function(){po.of(Ca).mark(Yn.UltimateWidget_MountingStarted),t.resize(Sa(r)),Ca.onReady=e}))}},showCashbackModal:function(e){o&&(t.theme(e.theme),o.request(Zr.RenderCashbackModal,e).then(a))},showSplitModal:function(e){o&&(t.theme(e.theme),o.request(Zr.RenderSplitModal,e).then(a))},onReady:function(t){o&&o.listen(Zr.Ready,(function(){return t()}))}}}();function xa(t,e,n,o){return void 0===t&&(t=20),void 0===e&&(e=0),void 0===n&&(n=32),"number"!=typeof t?(null==o||o(),20):Math.max(e,Math.min(t,n))}function Pa(t){switch(t){case Gt.None:return t;case Gt.Default:default:return Gt.Default}}var Ma=function(t,e){switch(t){case Jt.Small:return t;case Jt.Medium:return Jt.Medium;default:return null==e||e(),Jt.Medium}},Ea=function(t){switch(t){case Qt.Saturated:case Qt.Transparent:return t;default:return Qt.Default}},Ia=function(t){switch(t){case Xt.Dark:return t;case Xt.Light:default:return Xt.Light}},Ba=Zo(Se,{lowerCase:!0}),Oa={widgetType:$t.Ultimate,borderRadius:16,widgetTheme:Xt.Light};function Ta(t,e,n,o){var r={},i=C(8),a={sessionId:n.sessionId,merchantId:un(n.sheet),amount:hn(n.sheet),currencyCode:fn(n.sheet),theme:Ia(e.widgetTheme),borderRadius:xa(e.borderRadius),paymentMethods:yn(n.sheet),isPrepayment:Boolean(e.isPrepayment),paymentSheet:n.sheet,padding:Pa(e.padding),showCheckout:Boolean(o),hideWidgetHeader:Boolean(e.hideWidgetHeader),widgetSize:Ma(e.widgetSize),widgetBackground:Ea(e.widgetBackground),withOutline:Boolean(e.withOutline)};var s=function(){};try{po.of(r).mark(Yn.UltimateWidget_MountingStarted),po.ofSession(n.sessionId).mark(Yn.FirstViewMountingStarted);var u=function(){var t=document.createElement("div"),n=Yr(Object.assign({},e));return Nt.attrs(t,{class:Ba()}),Nt.style(t,Object.assign({},n,{transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),c=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe"),r="ya-frame-"+C(8);return Nt.style(o,Qr()),Nt.attrs(o,{class:Ba("frame"),src:Ln(pe,t,{env:e,rpcs:i,extra:a,merchantId:un(n.sheet)}),name:r}),o}();Nt.add(t,u),Nt.add(u,c);var d=function t(s,u){if(!u.contentWindow)throw new Error("Unable to get frame.contentWindow");var c=u.contentWindow,d=Vr({target:u.contentWindow,scope:i});return d.listen(Zr.MountingStart,(function(){c!==u.contentWindow&&(H("SDK: Widget remounted. Need to reconnect",{widgetType:e.widgetType,buttonType:e.buttonType}),d.destroy(),t(s,u),c=u.contentWindow)})),o&&d.listen(Zr.CheckoutButtonClick,(function(){return o()})),d.listen(Zr.Ready,(function(){po.of(r).mark(Yn.UltimateWidget_Mounted),Ca.onReady((function(){return d.emit(Zr.ReadyToShowInfo)}))})),d.listen(Zr.Resize,(function(t){Nt.style(s,Jr(e,t.height,t.offsetY))})),d.listen(Zr.ShowSplitInfo,(function(t){return Ca.showSplitModal(Object.assign({},a,{activePlan:t}))})),d.listen(Zr.ShowCashbackInfo,(function(){return Ca.showCashbackModal(a)})),n.on(go.PaymentUpdate,(function(){a.amount=hn(n.sheet),a.currencyCode=fn(n.sheet),d.emit(Zr.PaymentUpdate,Object.assign({},a))})),function(){return d.destroy()}}(u,c);s=function(){d(),Nt.remove(u)}}catch(t){q("SDK: UltimateWidget mount",t)}return{destroy:s}}function Ra(t,e,n,o){if(t){Ca.mount(n.env);var r=ne(e,Oa);return r.borderRadius=xa(r.borderRadius),Ta(t,r,n,o)}V("SDK: Falsy parent on widget-info mount",{fn:"UltimateWidget.mount",message:"parent: "+t})}var Wa=function(t){return t.Ready="widget-ready",t.Failure="widget-failure",t.WidgetExtrasChange="widget-extras-change",t.WidgetSizeChange="widget-size-change",t}({}),_a=function(t){return t.Update="update",t.Lock="lock",t.Unlock="unlock",t.Config="config",t}({}),Aa=function(t,e){if(void 0===e&&(e=200),t){var n=Nt.on(t,"transitionend",(function(e){t===e.target&&(n(),Nt.style(t,{transition:""}))}));setTimeout((function(){Nt.style(t,{transition:""}),n()}),e)}},Ua=function(t){function e(e,n){var o;return(o=t.call(this)||this).frame=void 0,o.frameListener=void 0,o.frameEmitter=void 0,o.payment=void 0,o.widgetOptions=void 0,o.onMessage=function(t){t&&t.type&&o.emit(t.type,t)},o.onPaymentUpdate=function(){o.frameEmitter&&o.frameEmitter.send({type:_a.Update,paymentSheet:o.payment.sheet})},o.onPaymentProcess=function(){o.frameEmitter&&o.frameEmitter.send({type:_a.Lock})},o.onPaymentLock=function(){o.frameEmitter&&o.frameEmitter.send({type:_a.Lock})},o.onPaymentUnlock=function(){o.frameEmitter&&o.frameEmitter.send({type:_a.Lock})},o.payment=e,o.widgetOptions=n,o.subscribePayment(),o}U(e,t),e.create=function(t,n){return new e(t,n)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){try{if(this.frame)return;var e=this.widgetOptions,n=this.payment,o=n.sheet,r=n.env,i=Or(o),a=e.widgetType===$t.BnplPreview?ge:fe,s=Ln(a,this.payment.sessionId,{env:r,extra:{paymentSheet:i,widgetOptions:e},merchantId:un(o)}),u=Dn(s);this.frame=De(s,Object.assign({},Qr(),{opacity:"0"})),Nt.add(t,this.frame),this.connect(u)}catch(t){q("sdk-widget mount",t)}},n.unmount=function(){this.frame&&(Nt.remove(this.frame),this.frame=void 0),this.frameListener&&(this.frameListener.destroy(),this.frameListener=void 0),this.frameEmitter&&(this.frameEmitter.destroy(),this.frameEmitter=void 0),this.unsubscribePayment()},n.show=function(){this.frame&&Nt.animate(this.frame,{property:"opacity",from:"0",to:"1"})},n.connect=function(t){var e,n,o=this,r=new at({targetUrl:t});this.frameListener=new Wt(r),this.frameListener.on(this.onMessage);var i=null===(e=this.frame)||void 0===e?void 0:e.contentWindow;this.on(Wa.Ready,(function(){var t,e;if(i!==(null===(t=o.frame)||void 0===t?void 0:t.contentWindow))if(H("SDK: Widget remounted. Need to reconnect",{widgetType:o.widgetOptions.widgetType}),i=null===(e=o.frame)||void 0===e?void 0:e.contentWindow)try{o.frameEmitter=new Ot(r,i)}catch(t){q("SDK: Widget Message Connection Emitter failed on remount",t)}else H("SDK: remount. No content window")})),this.frameEmitter=new Ot(r,null!==(n=i)&&void 0!==n?n:void 0)},n.subscribePayment=function(){this.payment.on(go.PaymentUpdate,this.onPaymentUpdate),this.payment.on(go.PaymentProcess,this.onPaymentProcess),this.payment.on(go.PaymentLock,this.onPaymentLock),this.payment.on(go.PaymentUnlock,this.onPaymentUnlock)},n.unsubscribePayment=function(){this.payment.off(go.PaymentUpdate,this.onPaymentUpdate),this.payment.off(go.PaymentProcess,this.onPaymentProcess),this.payment.off(go.PaymentLock,this.onPaymentLock),this.payment.off(go.PaymentUnlock,this.onPaymentUnlock)},e}(Kt),La=function(t){return t.isPayWithSplit="PWS",t.splitOnly="SO",t.splitActivePlan="SAP",t}({}),Da=Zo(Se,{lowerCase:!0}),ja={widgetType:$t.Compact,buttonType:zt.Checkout,bnplSelected:!1,borderRadius:16,buttonTheme:qt.Black,hideWidgetHeader:!1,padding:Gt.Default,widgetSize:Jt.Medium,widgetBackground:Qt.Default,withOutline:!1},Fa={type:zt.Pay,theme:qt.Black,width:Vt.MaxImportant,style:{borderRadius:"16px",height:"100%"},innerType:Yt.Widget},Na=function(t){function e(e,n){var o;(o=t.call(this)||this).hasShadowRoot=!1,o.payment=void 0,o.parent=void 0,o.options=void 0,o.buttonOptions=void 0,o.styleElement=void 0,o.widgetContainerElement=void 0,o.buttonContainer=void 0,o.widget=void 0,o.button=void 0,o.hasButton=void 0,o.renderWatcherUnsubscribe=function(){},o.animateShow=function(){if(o.widgetContainerElement&&!gn(o.payment.sheet)&&o.options.widgetType!==$t.BnplRequired){var t=o.widgetContainerElement.getBoundingClientRect().width<325?"40px":"48px";Nt.style(o.widgetContainerElement,{height:t}),setTimeout((function(){Nt.style(o.widgetContainerElement,{transition:"height 150ms ease-in-out"})}))}},o.onButtonClick=function(t){o.emit(Ht.Click,t)},o.onSdkWidgetReady=function(t){o.buttonOptions&&t.buttonTheme&&(o.buttonOptions.theme=t.buttonTheme),o.showWidget(),o.updateButtonOptionsExtra(t.buttonExtra),Aa(o.buttonContainer,200),Aa(o.widgetContainerElement,200),po.of(o).mark(Yn.WidgetMounted)},o.onSdkWidgetExtrasChange=function(t){var e,n,r=(e=t,(n={})[La.isPayWithSplit]=He()(["split","payWithSplit"],void 0,e),n[La.splitOnly]=He()(["split","onlySplit"],void 0,e),n[La.splitActivePlan]=He()(["split","activePlan"],void 0,e),n);o.updateButtonOptionsExtra({bnplSelected:r[La.isPayWithSplit]}),o.payment.emit(go.PaymentExtra,{innerType:o.buttonOptions.innerType,bnplSelected:o.buttonOptions.bnplSelected}),function(t,e){e&&We(e)&&(Lr[t.sessionId]=Lr[t.sessionId]||{},Object.entries(e).forEach((function(e){var n=e[0],o=e[1];Lr[t.sessionId][n]=o})))}(o.payment,r)},o.onSdkWidgetSizeChange=function(t){var e=t.widgetSize,n=t.buttonPosition,r=t.badgesHeight,i=n||{},a=i.top,s=i.left,u=i.width,c=i.height;e.height&&o.widgetContainerElement&&(o.widgetContainerElement.style.height=e.height,"0"===e.height?Nt.hide(o.widgetContainerElement,!0):Nt.show(o.widgetContainerElement)),o.buttonContainer&&(a&&Nt.style(o.buttonContainer,{top:a}),s&&Nt.style(o.buttonContainer,{left:s}),u&&Nt.style(o.buttonContainer,{width:u}),c&&Nt.style(o.buttonContainer,{height:c})),r&&o.button&&o.button.setBackdrop(r),c&&o.options.borderRadius&&o.options.borderRadius>=parseFloat(c)/2&&(o.options.borderRadius=parseFloat(c)/2,o.widgetContainerElement&&(o.widgetContainerElement.style.borderRadius=o.options.borderRadius+"px")),o.hasButton&&!o.button&&o.mountButton()},o.onSdkWidgetFailure=function(){o.unmountWidget(),o.unmountButton()};try{o.payment=n,o.options=ne(e,ja),o.hasButton=o.options.widgetType!==$t.BnplPreview;var r=o.isWidgetTypeWithSplitSelect()?o.isBnplSelected():void 0;o.buttonOptions=ee({style:{borderRadius:o.options.borderRadius+"px",height:"100%"},theme:o.options.buttonTheme,innerType:Yt.Widget,bnplSelected:r},Fa)}catch(t){throw q("button create",t),t}return o}U(e,t),e.create=function(t,n){return new e(t,n)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){if(t){po.of(this).mark(Yn.WidgetMountingStarted),po.ofSession(this.payment.sessionId).mark(Yn.FirstViewMountingStarted),this.parent&&this.unmount();try{this.parent=t,this.hasShadowRoot=void 0!==window.ShadowRoot&&t instanceof ShadowRoot,this.mountStyles(),this.mountWidgetContainer(),this.hasButton&&(this.mountButtonContainer(),gn(this.payment.sheet)||this.options.widgetType===$t.BnplRequired?(Nt.style(this.widgetContainerElement,{transition:""}),Nt.style(this.buttonContainer,{transition:""})):this.mountButton()),this.isOnlyButton()||this.mountWidget()}catch(t){q("button mount",t)}}else V("SDK: Falsy parent on widget mount",{fn:"Widget.mount",message:"parent: "+t})},n.unmount=function(){this.parent=void 0,this.renderWatcherUnsubscribe(),this.unmountButton(),this.unmountButtonContainer(),this.unmountWidget(),this.unmountWidgetContainer(),this.unmountStyles()},n.mountWidgetContainer=function(){var t=Da(),e=document.createElement("div");e.setAttribute("class",t),Nt.style(e,Yr({borderRadius:this.options.borderRadius})),this.parent?Nt.add(this.parent,e):z("SDK: Cannot mount widget container: has no parent element"),this.widgetContainerElement=e},n.mountButtonContainer=function(){if(this.widgetContainerElement){var t=Da("container",{}),e=document.createElement("div");e.setAttribute("class",t),Nt.style(e,{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",width:"100%",height:"100%","z-index":"2",display:"flex","flex-direction":"column-reverse","justify-content":"flex-end",transition:"top 150ms ease-in-out, left 150ms ease-in-out, width 150ms ease-in-out"}),Nt.add(this.widgetContainerElement,e),this.animateShow(),this.buttonContainer=e}else z("SDK: Skip widget button mount on nonexisting parent")},n.unmountWidgetContainer=function(){this.widgetContainerElement&&Nt.remove(this.widgetContainerElement)},n.unmountButtonContainer=function(){this.buttonContainer&&Nt.remove(this.buttonContainer)},n.mountStyles=function(){var t=document.createElement("style");t.setAttribute("type","text/css"),this.hasShadowRoot?(this.styleElement=t,this.parent?Nt.add(this.parent,t):V("SDK: Widget cannot mount styles: has no parent element")):e.isMainStylesMounted||(document.head.appendChild(t),e.isMainStylesMounted=!0)},n.unmountStyles=function(){this.styleElement&&Nt.remove(this.styleElement)},n.mountWidget=function(){this.widgetContainerElement&&this.widgetContainerElement.isConnected?(this.widget=Ua.create(this.payment,this.options),this.widget.mount(this.widgetContainerElement),this.widget.on(Wa.Ready,this.onSdkWidgetReady),this.widget.on(Wa.Failure,this.onSdkWidgetFailure),this.widget.on(Wa.WidgetSizeChange,this.onSdkWidgetSizeChange),this.widget.on(Wa.WidgetExtrasChange,this.onSdkWidgetExtrasChange)):V("Skip payment-method mount on unconnected button")},n.unmountWidget=function(){this.widget&&this.widget.destroy()},n.showWidget=function(){this.widget&&this.widget.show()},n.mountButton=function(){if(this.button&&this.unmountButton(),this.buttonOptions&&this.buttonContainer){var t=Ur.create(this.buttonOptions,this.payment,{disableStickyButton:!0});po.of(this).fork({isInWidget:!0}).bind(t),this.button=t,this.button.mount(this.buttonContainer),this.button.on(Ht.Click,this.onButtonClick)}else V("Skip private button mount on nonexisting parent")},n.isOnlyButton=function(){return!gn(this.payment.sheet)&&this.options.widgetType===$t.Mini},n.unmountButton=function(){this.button&&this.button.destroy()},n.updateButtonOptionsExtra=function(t){t&&(this.buttonOptions=Object.assign({},this.buttonOptions,t))},n.isWidgetTypeWithSplitSelect=function(){return!!this.options.widgetType&&Zt.includes(this.options.widgetType)},n.isBnplSelected=function(){return this.options.bnplSelected||this.options.widgetType===$t.BnplRequired},e}(Kt);Na.isMainStylesMounted=!1;var Ka=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).resolvers={},e.hasListener=function(t){return e.listeners[t]&&e.listeners[t].length>0},e}U(e,t);var n=e.prototype;return n.resolve=function(t,e){var n=this.resolvers[t];n&&Ae(e)&&e.then(n)},n.on=function(e,n){return t.prototype.on.call(this,e,n)},n.emit=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(o){var r=o.call(n,e);n.resolve(t,r)}))},e}(Kt),za=function(t){function e(e){var n;return(n=t.call(this)||this).payment=void 0,n.payment=e,n}return U(e,t),e.prototype.setPayment=function(t){this.payment=t},_(e,[{key:"env",get:function(){return this.payment.env}},{key:"sheet",get:function(){return this.payment.sheet}},{key:"sessionId",get:function(){return this.payment.sessionId}},{key:"signalData",get:function(){return Object.assign({},Do(Object.assign({env:this.payment.env},this.payment.sheet)),{sessionId:this.sessionId})}}])}(Kt),qa=["env"],Va=function(e){function n(n,o){var r,i;if((r=e.call(this)||this).offFrameBroadcastListener=void 0,r.checkoutCounter=0,r.overlay=void 0,r.connectionOptions=void 0,r.connectionManager=void 0,r.connectionAgent=void 0,r.checkTargetOpeningTimer=void 0,r.abortChecksAttempts=0,r.checkoutSessionCompleted=void 0,r.paymentProcessing=!1,r.formLoading=!1,r.formBaseUrl=void 0,r.formWindowFeatures=void 0,r.proxy=void 0,r.buttons=[],r.widgets=[],r.env=void 0,r.sheet=void 0,r.sessionType=void 0,r.sessionId=void 0,r.onMessage=function(t){var e;if(t&&t.type)switch(t.type){case yo.Ready:Y("SDK: Form message event",{sdkInFrame:So(),eventType:t.type}),r.formLoading=!1,r.emit(t.type,t);break;case yo.Change:case yo.Reset:case yo.Setup:r.emit(t.type,t);break;case yo.Success:case yo.Process:Y("SDK: Form message event",{sdkInFrame:So(),eventType:t.type,sessionType:r.sessionType});var n=t.type===yo.Success||t.type===yo.Process&&t.paymentMethodInfo.type===Ze.Split;r.completeCheckoutSession(),t.type===yo.Process&&r.processCheckout(),n||r.closeCheckoutWindow("process"),function(t,e){void 0===e&&(e=0);var n=Date.now();if(!document.visibilityState)return t("undefined");var o=function(){var r=document.visibilityState;"visible"===r?t():e>0&&Date.now()-n>e?t("timer",r):jn(o,Math.min(e,500))};jn(o,0)}((function(e,n){e&&V("SDK: Unexpected page focus",{trigger:e,state:n}),r.emit(t.type,t)}),5e3);break;case yo.Abort:Y("SDK: Form message event",{sdkInFrame:So(),eventType:t.type,sessionType:r.sessionType}),r.startCheckingTargetOpening(t);break;case yo.Error:Y("SDK: Form message event",{sdkInFrame:So(),eventType:t.type,reason:t.reason,sessionType:r.sessionType}),r.completeCheckoutSession(),r.closeCheckoutWindow("error"),r.emit(t.type,t);break;case yo.Ping:var o={type:bo.Ping};null!==(e=r.connectionAgent)&&void 0!==e&&e.isConnected?r.connectionAgent.send(o):r.sendFrameBroadcastMessage(o)}},r.onOverlayClick=function(){r.connectionAgent&&r.connectionAgent.focus()},r.onBeforeUnload=function(){r.destroyChannel()},r.onTargetOpeningCheck=function(t){!(r.connectionAgent&&r.connectionAgent.isConnected)&&(r.abortChecksAttempts+=1),r.abortChecksAttempts>=2&&(r.destroyChannel(),r.checkoutSessionCompleted||(r.completeCheckoutSession(),Y("SDK: Not connected",{sdkInFrame:So(),eventType:t.type,sessionType:r.sessionType}),r.emit(t.type,t)))},null===n)throw z("SDK: Payment create error: payment data is null"),new Error("Payment data is null");try{var a=n.env,s=void 0===a?$e.Production:a,u=t(n,qa);r.env=s,r.sheet=u,r.sessionType=u.type,r.sessionId=o,r.proxy=new za(r),r.overlay=ui.getInstance(),r.overlay.on(ui.Events.Click,r.onOverlayClick),r.formBaseUrl=(i=r.sessionType)===Ye.Payment?ce:[Ye.Checkout,Ye.CheckoutOld].includes(i)?de:ue,r.formWindowFeatures=function(t){var e=window.screen,n=t[0],o=t[1];if(!(e.width<n||e.height<o))return["scrollbars=yes","resizable=yes","status=no","location=no","toolbar=no","menubar=no","width="+n,"height="+o,"left="+(e.width-n>>1),"top="+(e.height-o>>1)].join(",")}(r.sessionType===Ye.Payment?we:be);var c=Ln(r.formBaseUrl,r.sessionId,{env:s,extra:Dr(r.__proxy()),sessionType:r.sessionType,merchantId:un(r.sheet)}),d=function(t){return t+"-"+Date.now()}("YandexPay");r.connectionOptions=new at({targetUrl:c,channel:d,sessionId:r.sessionId}),r.connectionManager=new $o(r.connectionOptions),r.connectionManager.on(r.onMessage),Nt.on(window,"beforeunload",r.onBeforeUnload),Nt.on(window,"unload",r.onBeforeUnload),r.logIfMissedImportantSubscribers(),r.logMissedQueryTokenHandler()}catch(t){throw q("SDK: Payment create error",t),t}return r}U(n,e);var o=n.prototype;return o.__proxy=function(){return this.proxy},o.mountButton=function(t,e){var n=this,o=new Ur(e,this.proxy);po.ofSession(this.sessionId).fork().bind(o);var r=o.on(Ht.Click,(function(){return n.checkout()}));o.mount(t),this.buttons.push({parent:t,button:o,offCheckout:r})},o.mountSubmitButton=function(t,e){var n=new Ur(e,this.proxy,{type:"submit"});po.ofSession(this.sessionId).fork().bind(n),n.mount(t),this.buttons.push({parent:t,button:n,offCheckout:function(){}})},o.unmountButton=function(t){this.buttons=this.buttons.filter((function(e){var n=e.parent,o=e.button;return t===n&&o.destroy(),t!==n}))},o.mountWidget=function(t,e){var n=this,o=function(){Ao.sdk.mountWidget(Object.assign({},n.proxy.signalData,{widgetType:e.widgetType||"unknown"}))};if(e.widgetType!==$t.Simple){var r;if(e.widgetType===$t.Info)return function(){var r=ei(t,e,n.proxy);r&&(o(),n.widgets.push({parent:t,widget:r,offCheckout:function(){}}))}();return e.widgetType===$t.Ultimate?function(){if(n.sheet.type!==Ye.Payment&&n.sheet.type!==Ye.ByToken)return q("UltimateWidget works only in Payment"),void console.error("YandexPay: UltimateWidget works only in Payment");if(rn(n.proxy.sheet))throw new Error("Ultimate widget does not support payment sheet v2");var r=Ra(t,e,n.proxy);r&&(o(),n.widgets.push({parent:t,widget:r,offCheckout:function(){}}))}():function(){var r=new Na(e,n.proxy);po.ofSession(n.sessionId).fork().bind(r);var i=r.on(Ht.Click,(function(){return n.checkout()}));r.mount(t),o(),n.widgets.push({parent:t,widget:r,offCheckout:i})}()}(r=wa(t,e,n.proxy))&&(o(),n.widgets.push({parent:t,widget:r,offCheckout:function(){}}))},o.unmountWidget=function(t){this.widgets=this.widgets.filter((function(e){var n=e.parent,o=e.widget;return t===n&&o.destroy(),t!==n}))},o.update=function(t){try{H("SDK: Update paymentSheet started"),Wn(this.sheet,t)&&this.proxy.emit(go.PaymentUpdate,null);var e={type:bo.Update,updateData:t};this.connectionAgent&&this.connectionAgent.isConnected?(this.connectionAgent.send(e),this.formLoading&&q("SDK: Update sheet on form loading, type: "+this.sessionType)):this.sendFrameBroadcastMessage(e)}catch(t){q("SDK: Update paymentSheet failed",t)}},o.complete=function(t,e){var n={type:bo.Complete,reason:t,errors:JSON.stringify(e)};this.connectionAgent&&this.connectionAgent.isConnected?this.connectionAgent.send(n):(this.sendFrameBroadcastMessage(n),this.destroyChannel())},o.checkout=function(){try{var t=ko.getInstance();if(this.paymentProcessing)return;if(this.connectionAgent)return void this.connectionAgent.focus();var e=t.paymentReady.get(this.sessionId);if(!1===e)return this.proxy.emit(go.PaymentError,null),void V("SDK: Payment is forbidden by payment ready check");null==e&&V("SDK: Check payment ready result is missing"),t.paymentStart.set(this.sessionId,!0),this.checkoutCounter+=1,this.checkoutSessionCompleted=!1,this.formLoading=!0,ai.reachGoal(gn(this.sheet)?"ym-begin-yasplit":"ym-begin-yapay");var n=vt?void 0:this.formWindowFeatures,o=Ln(this.formBaseUrl,this.sessionId,{checkoutCounter:this.checkoutCounter,env:this.env,sessionType:this.sessionType,extra:Dr(this.__proxy()),duid:Go("_ym_uid",void 0),sdkInIframe:So(),merchantId:un(this.sheet)});this.connectionManager.options.targetUrl=o;try{this.connectionAgent=this.connectionManager.open({type:bo.Payment,sheet:this.sheet},n,this.logQueryModeInIFrame,!1,So()),this.startCheckingTargetOpening({type:yo.Abort,reason:vo.Close}),vt||this.overlay.show(),Ao.sdk.buttonCheckout(this.proxy.signalData)}catch(t){var r;Y("SDK: Start listen broadcast",{sdkInFrame:So(),sessionType:this.sessionType}),Ao.sdk.buttonCheckoutError(this.proxy.signalData),null===(r=this.overlay)||void 0===r||r.hide(),this.proxy.emit(go.PaymentError,null),this.startBroadcastMode()}}catch(t){Ao.sdk.buttonCheckoutError(this.proxy.signalData),q("SDK: Payment checkout error",t)}},o.sendFrameBroadcastMessage=function(t){var e=String(new ct(t,this.connectionOptions.channel,this.connectionOptions.sourceUrl));ko.getInstance().sendMessage({type:go.SdkBroadcastSendMessage,message:e,channel:this.sessionId})},o.onFrameBroadcastMessage=function(t){var e=new MessageEvent("message",{data:t.message});try{var n=function(t,e){var n=Mt(t);return Pt(n,e)}(e,this.connectionOptions),o=n.payload;this.onMessage(o)}catch(t){V("SDK: Can't parse broadcast frame message")}},o.startBroadcastMode=function(){var t=this;this.offFrameBroadcastListener=ko.getInstance().on(go.SdkBroadcastOnMessage,(function(e){return t.onFrameBroadcastMessage(e)})),this.sendFrameBroadcastMessage({type:bo.Ping})},o.completeCheckoutSession=function(){var t;this.checkoutSessionCompleted=!0,this.formLoading=!1,null===(t=this.overlay)||void 0===t||t.hide(),ko.getInstance().paymentStart.delete(this.sessionId)},o.processCheckout=function(){this.paymentProcessing=!0,this.buttons.forEach((function(t){return(0,t.offCheckout)()})),this.proxy.emit(go.PaymentProcess,null)},o.closeCheckoutWindow=function(t){var e=this;this.connectionAgent&&this.connectionAgent.isConnected?(this.connectionAgent.close(),this.stopCheckingTargetOpening(),setTimeout((function(){e.connectionAgent&&e.connectionAgent.isConnected&&V("SDK: Pay form not closed",{source:"sdk",from:t})}),3e3)):this.sendFrameBroadcastMessage({type:bo.Complete,reason:wo.Close})},o.destroy=function(){e.prototype.destroy.call(this),this.complete(wo.Close),this.destroyChannel(),po.unbindFromSession(this.sessionId),this.sheet=void 0,this.connectionManager.destroy(),this.connectionManager=null,this.overlay.destroy(),this.overlay=null,this.buttons.forEach((function(t){return t.button.destroy()})),this.buttons=[],this.widgets.forEach((function(t){return t.widget.destroy()})),this.widgets=[],this.offFrameBroadcastListener&&this.offFrameBroadcastListener()},o.destroyChannel=function(){this.stopCheckingTargetOpening(),this.connectionAgent&&(this.connectionAgent.destroy(),this.connectionAgent=null),this.overlay&&this.overlay.hide()},o.startCheckingTargetOpening=function(t){this.stopCheckingTargetOpening(),this.checkTargetOpeningTimer=setInterval(this.onTargetOpeningCheck,250,t)},o.stopCheckingTargetOpening=function(){this.checkTargetOpeningTimer&&(clearInterval(this.checkTargetOpeningTimer),this.checkTargetOpeningTimer=void 0,this.abortChecksAttempts=0)},o.logQueryModeInIFrame=function(){var t=So();return t?V("SDK: Query mode in iframe"):H("SDK: Query mode in top window"),t},o.logIfMissedImportantSubscribers=function(){var t=this;setTimeout((function(){if(t.sheet){var e=on(t.sheet)?yo.Success:yo.Process;t.hasListener(e)||(console.warn("Yandex.Pay: Payment object requires subscriptions on %c"+e+" event","font-weight: bold;"),H("SDK: Missed subscription: "+e))}}),10)},o.logMissedQueryTokenHandler=function(){var t,e=this,n=null!==(t=this.connectionManager.hasQueryMessage())&&void 0!==t?t:{},o=n.hasMessage,r=n.hasForceMode;o&&this.once(yo.Process,(function(){var t={forceMode:String(r)};e.hasListener(yo.Process)?H("SDK: Query token successfully handled",t):H("SDK: Query token not handled by merchant",t)}))},n}(Ka),Ha=function(t){function e(e,n){return t.call(this,e,n)||this}return U(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(Va),Ya=function(t){return t.toString()},$a=function(t){return"{"+t+"}"};function Ga(t,e){var n;return null!==(n=t.errors)&&void 0!==n&&n.length?Ja(t.errors,e):[{path:e,error:{expected:t.expected,got:t.got}}]}function Ja(t,e){void 0===e&&(e="");for(var n=[],o=0;o<t.length;o++){var r=e?e+"."+t[o].path.toString():t[o].path,i=Ga(t[o].error,r.toString());n.push.apply(n,i)}return n}var Qa=function(t){function e(n,o,r){var i,a,s,u=Ya(n),c="function"==typeof o?String(o):JSON.stringify(o);return(s=t.call(this,"Invalid type! Expected "+u+" but got "+c+"!")||this).details=void 0,s.description=void 0,s.details=r.value,s.description=function(t){try{if(!t)return{};var e=Ja(t),n={};return e.forEach((function(t){n[t.path.toString()]=t.error})),n}catch(t){return{error:t}}}(null===(i=s.details)||void 0===i?void 0:i.errors),s.name="ValidationError",null===(a=Error.captureStackTrace)||void 0===a||a.call(Error,s),Object.setPrototypeOf(s,e.prototype),s}return U(e,t),e}(Sn(Error)),Za=function(t){return function(e){var n=t.__validate(e);if("right"===n._t||"nextValid"===n._t)return n.value;throw new Qa(t,e,n)}},Xa={right:function(t){return{_t:"right",value:t}},left:function(t){return{_t:"left",value:t}},nextValid:function(t){return{_t:"nextValid",value:t}},nextNotValid:function(t){return{_t:"nextNotValid",value:t}}},ts=function(t,e){return function(n){return Object.assign({},n,{toString:function(){return t=[null==n?void 0:n.toString(),null==e?void 0:e()].filter((function(t){return"string"==typeof t&&""!==t})),o=t.join(" | "),t.length>1?"("+o+")":o;var t,o},__validate:function(e){var o=t.call(this,e,Xa);return"left"===o._t||"right"===o._t?o:n?"nextNotValid"===o._t?n.__validate(o.value.got):n.__validate(o.value):o}})}},es=ts((function(t,e){return"string"!=typeof t?e.left({expected:"string",got:t}):e.nextValid(t)}),(function(){return"string"}));function ns(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.reduce((function(t,e){return e(t)}),"function"==typeof t?t():t)}var os=function(t){return"object"==typeof t&&null!==t&&"__validate"in t&&"toString"in t},rs=function(t,e,n){void 0===e&&(e=function(t){return t});var o=function(){return t.map((function(t){return os(t)?Ya(t):JSON.stringify(t)})).join(" | ")};return ts((function(r,i){for(var a=0;a<t.length;++a){var s=t[a];if(os(s)){var u=s.__validate(r);if("right"===u._t)return i.right(u.value);if("nextValid"===u._t)return i.nextValid(u.value)}var c=e(s);if(e(r)===c)return i.right(c)}return void 0!==n?i.right(n):i.left({expected:o(),got:r})}),(function(){var e=o();return t.length>1?"("+e+")":e}))},is=ts((function(t,e){return"boolean"!=typeof t?e.left({expected:"boolean",got:t}):e.nextValid(t)}),(function(){return"boolean"})),as=ts((function(t,e){return void 0===t?e.right(void 0):e.nextNotValid({expected:"optional",got:t})}),(function(){return"undefined"})),ss=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ts((function(t,n){if(!Array.isArray(t))return n.left({expected:"array",got:t});var o=!1,r=new Array(t.length),i=[];t:for(var a=0;a<t.length;++a){for(var s=t[a],u=void 0,c=void 0,d=0;d<e.length;++d)if("right"===(u=(c=e[d]).__validate(s))._t||"nextValid"===u._t){r[a]=u.value;continue t}u&&c&&("nextNotValid"===u._t||"left"===u._t)&&(i.push({path:a,error:u.value}),o=!0)}return o?n.left({expected:"array",got:t,errors:i}):n.nextValid(r)}),(function(){var t=e.map((function(t){return Ya(t)})).join(" | ");return e.length>1?"("+t+")[]":t+"[]"}))},us=n(267),cs=n.n(us),ds=n(15),ls=n.n(ds),hs=function(t){return"string"==typeof t?ls()(t):t},fs=function(t){return"string"==typeof t?cs()(t):t},ms={allowUnknownKeys:!0},ps=function(t,e){return function(t,e,n){return ts((function(o,r){if("object"!=typeof o||null===o)return r.left({expected:"object",got:o});var i=Object.assign({},o);if(n)for(var a in n)!i[a]&&n[a]&&(i[a]=n[a]);var s=t,u=!(null==e||!e.allowUnknownKeys),c=[],d=!1,l={};for(var h in i)if(Object.prototype.hasOwnProperty.call(i,h)){var f=i[h],m=s[h];if(m){var p=m.__validate(f);l[h]=p.value,"left"===p._t&&(c.push({path:h,error:p.value}),d=!0)}else u?l[h]=f:(d=!0,c.push({path:h,error:{expected:"unknownKey",got:f}}))}for(var y in s)if(Object.prototype.hasOwnProperty.call(s,y)&&!(y in l)){var v=s[y],g=i[y],b=v.__validate(g);"left"===b._t&&(c.push({path:y,error:b.value}),d=!0)}return d?r.left({expected:"object",got:o,errors:c}):r.nextValid(l)}),(function(){var e=Object.entries(t).map((function(t){var e=t[0],n=t[1];return[e,Ya(n)]}));return 0===e.length?$a(""):$a(" "+e.map((function(t){var e,n=t[0],o=t[1];return(/\s/.test(e=n)?'"'+e+'"':e)+": "+o})).join(", ")+" ")}))}(t,ms,e)},ys=ts((function(t,e){var n="string"==typeof t?t.replace(",","."):t;return isFinite(n)?e.nextValid(Number(n).toFixed(2)):e.left({expected:"Price",got:t})}),(function(){return"Price"})),vs=ts((function(t,e){return isFinite(t)?e.nextValid(Math.floor("number"==typeof t?t:Number(t))):e.left({expected:"finite integer",got:t})}),(function(){return"finite integer"})),gs=function(t){return isFinite(t)?Number(t):t},bs=ps({count:vs()}),ws=ps({value:es()}),ks=ps({email:ns(rs([is()],Boolean),as),name:ns(rs([is()],Boolean),as)}),Ss=ps({billingContact:ns(ks,as)}),Cs=ps({amount:ys(),type:as(rs(Object.values(Qe),hs)()),label:as(es()),quantity:as(ps({count:vs(),label:as(es())})())}),xs=ps({version:rs([2],gs)(),merchant:ps({id:es(),name:es(),url:ns(es,as)})(),order:ps({id:es(),items:ns(ss(Cs()),as),total:ps({amount:ys(),label:ns(es,as)})(),cartExternalId:ns(es,as)})(),currencyCode:rs(Object.values(Je),hs)(),recurringOptions:as(rs([ps({type:rs([en.Recurring],hs)(),optional:as(is())})(),ps({type:rs([en.Deferred],hs)()})()])()),language:ns(rs(["ru","en"],fs),as),requiredFields:ns(Ss,as),env:ns(rs(Object.values($e),hs,$e.Production),as),type:rs(Object.values(Ye))(),countryCode:rs(Object.values(Ge),hs)()},{order:{id:"0",total:{amount:"0.00"}}})(),Ps=ps({version:rs([3],gs)(),merchantId:es(),currencyCode:rs(Object.values(Je),hs)(),cart:ps({items:ss(ps({productId:es(),total:ys(),quantity:ns(bs,as)})())(),coupons:ns(ss(ws()),as),externalId:ns(es,as)})(),orderId:ns(es,as),language:ns(rs(["ru","en"],fs),as),metadata:ns(es,as),availablePaymentMethods:ns(ss(rs(Object.values(Ze),hs)()),as),type:rs(Object.values(Ye))(),env:ns(rs(Object.values($e),hs,$e.Production))})(),Ms=Za(ps({version:rs([4],gs)(),merchantId:es(),currencyCode:rs(Object.values(Je),hs)(),totalAmount:ys(),availablePaymentMethods:ns(ss(rs(Object.values(Ze),hs)()),as),language:ns(rs(["ru","en"],fs),as),type:rs(Object.values(Ye))(),env:ns(rs(Object.values($e),hs,$e.Production),as)})()),Es=Za(Ps),Is=Za(xs),Bs=function(t,e){try{var n=e(t);return Y("Validation V2/V3 OK"),n}catch(e){var o=e.message||e;if("description"in e&&e.description?(Y("SDK: Payment validation failed with errors",{merchantId:un(t),sheetVersion:t.version,errors:e.description}),o="Payment validation failed with errors: "+JSON.stringify(e.description),console.warn(o)):Y("SDK: Payment validation failed",e),an(t))throw new Error(o);return t}};function Os(t){var e,n=(e=t,Object.assign({},e,{type:Tn(e)}));return an(n)?Bs(n,Ms):on(n)?Bs(n,Es):Bs(n,Is)}var Ts={__proxy:function(){return new za(this)},env:$e.Production,sessionId:"deprecatedButtonFallbackPayment",sheet:{type:Ye.Payment,version:3,merchantId:"deprecatedButtonFallbackMerchantId",cart:{items:[]},currencyCode:Je.Rub}},Rs=function(t){function e(n){var o;H("SDK: Usage of DeprecatedButton");var r=e.lastPayment,i=r?r.__proxy():new za(Ts);return o=t.call(this,n,i)||this,r||(e.waitProxies.push(i),V("Create button without payment")),o}return U(e,t),e.create=function(t){return new e(t)},e.setPayment=function(t){e.lastPayment=t,e.waitProxies.forEach((function(e){e.setPayment(t)})),e.waitProxies=[]},e}(Ur);Rs.lastPayment=void 0,Rs.waitProxies=[];var Ws=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).resolvers[yo.Change]=function(t){t&&o.update(t)},o.resolvers[yo.Reset]=function(t){t&&o.update(t)},o.resolvers[yo.Setup]=function(t){t&&o.setup(t)},o}U(e,t);var n=e.prototype;return n.createButton=function(t){var e=new Ur(t,this.proxy);return po.ofSession(this.sessionId).fork().bind(e),e},n.setup=function(t){this.connectionAgent&&this.connectionAgent.isConnected&&this.connectionAgent.send({type:bo.Setup,setupData:t})},n.checkout=function(){return t.prototype.checkout.call(this)},e}(Va),_s=function(t){return t};function As(t,e){return new Promise((function(n,o){var r,i,a=[{supportedMethods:"yandexpay",data:{uid:"",paymentSheet:t,sessionId:e}}],s={id:i=dn(r=t),total:{label:rn(r)&&void 0!==r.order.total.label?r.order.total.label:_s("Заказ")+" "+i,amount:{value:hn(r),currency:r.currencyCode}}};try{var u=new PaymentRequest(a,s),c=setTimeout((function(){o(new Error("PaymentRequest timeout"))}),5e3);u.canMakePayment().then((function(t){t?u.show(Promise.resolve(s)).then((function(t){clearTimeout(c),n(t)}),o):o(new Error("Can't make payment"))}),o)}catch(t){o(t)}}))}function Us(t){return t.paymentMethodType===Ze.Card?{type:Ze.Card,cardLast4:t.cardLast4,cardNetwork:t.cardNetwork}:{type:Ze.Cash}}var Ls=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).praStatus=void 0,o.praStatus="init",o}U(e,t);var n=e.prototype;return n.createButton=function(t){var e=new Ur(t,this.proxy);return po.ofSession(this.sessionId).fork().bind(e),e},n.checkoutByPaymentRequestApi=function(){var t=this;return new Promise((function(e,n){As(Object.assign({},t.sheet,{env:t.env}),t.sessionId).then((function(n){var o=n.details,r=o.paymentResult,i=o.details;if(H('PaymentRequestApiResponse in PP. Result="'+r+'"'),r===yo.Process){var a={paymentMethodInfo:Us(i),type:yo.Process,token:i.paymentToken,orderAmount:hn(t.sheet)};i.email&&(a.billingContact={email:i.email}),t.emit(yo.Process,a)}else r===yo.Abort?(n.complete("unknown"),t.emit(yo.Abort,{type:yo.Abort})):(n.complete("fail"),t.emit(yo.Error,{type:yo.Error,reason:i.error}));e()})).catch((function(t){V("PaymentRequestApiError in PP",{message:t.name+": "+t.message}),n(t)}))}))},n.checkout=function(){var e=this;if("failed"===this.praStatus||!wt||So()||Ue.get("disabledPRA")||!(bt||gt&&Ue.get("hasNewPRA")))return t.prototype.checkout.call(this);"pending"!==this.praStatus&&(this.praStatus="pending",this.checkoutByPaymentRequestApi().then((function(){e.praStatus="init"}),(function(){e.praStatus="failed",t.prototype.checkout.call(e)})))},n.update=function(e){t.prototype.update.call(this,e)},e}(Va);var Ds=["env"],js=function(){function e(e,n,o){this.checkoutCounter=0,this.formLoading=!1,this.onFormOpenError=void 0,this.onPayButtonClick=void 0,this.onWidgetCheckoutClick=void 0,this.source=void 0,this.proxy=void 0,this.buttons=[],this.widgets=[],this.env=void 0,this.sheet=void 0,this.sessionId=void 0;var r=o.onFormOpenError,i=o.onPayButtonClick,a=o.onWidgetCheckoutClick,s=o.source;try{if(null===e)throw new Error("Payment data is null");if(!i||!_e(i))throw new Error("onPayButtonClick must be a function");a&&!_e(a)&&console.warn("Yandex.Pay: onWidgetCheckoutClick must be a function","font-weight: bold;");var u=e.env,c=void 0===u?$e.Production:u,d=t(e,Ds);this.onPayButtonClick=i,this.onFormOpenError=r,_e(a)&&(this.onWidgetCheckoutClick=a),this.env=c,this.sheet=d,this.sessionId=n,this.proxy=new za(this),this.source=s}catch(t){throw q("SDK: PaymentV4 create error",{error:t,source:s}),t}}var n=e.prototype;return n.__proxy=function(){return this.proxy},n.mountButton=function(t,e){var n=this,o=new Ur(e,this.proxy);po.ofSession(this.sessionId).fork().bind(o);var r=o.on(Ht.Click,(function(){n.checkout()}));o.mount(t),this.buttons.push({parent:t,button:o,offCheckout:r})},n.mountSubmitButton=function(t,e){var n=new Ur(e,this.proxy,{type:"submit"});po.ofSession(this.sessionId).fork().bind(n),n.mount(t),this.buttons.push({parent:t,button:n,offCheckout:function(){}})},n.unmountButton=function(t){this.buttons=this.buttons.filter((function(e){var n=e.parent,o=e.button;return t===n&&o.destroy(),t!==n}))},n.mountWidget=function(t,e){var n=this,o=function(){Ao.sdk.mountWidget(Object.assign({},n.proxy.signalData,{widgetType:e.widgetType||"unknown"}))};if(e.widgetType!==$t.Simple){var r;if(e.widgetType===$t.Info)return function(){var r=ei(t,e,n.proxy);r&&(o(),n.widgets.push({parent:t,widget:r,offCheckout:function(){}}))}();return e.widgetType===$t.Ultimate?function(){if(n.sheet.type!==Ye.Payment&&n.sheet.type!==Ye.ByToken)return q("UltimateWidget works only in Payment",{source:n.source}),void console.error("YandexPay: UltimateWidget works only in Payment");var r=Ra(t,e,n.proxy,n.onWidgetCheckoutClick);r&&(o(),n.widgets.push({parent:t,widget:r,offCheckout:function(){}}))}():function(){var r=new Na(e,n.proxy);po.ofSession(n.sessionId).fork().bind(r);var i=r.on(Ht.Click,(function(){return n.checkout()}));r.mount(t),o(),n.widgets.push({parent:t,widget:r,offCheckout:i})}()}(r=wa(t,e,n.proxy,n.onWidgetCheckoutClick))&&(o(),n.widgets.push({parent:t,widget:r,offCheckout:function(){}}))},n.unmountWidget=function(t){this.widgets=this.widgets.filter((function(e){var n=e.parent,o=e.widget;return t===n&&o.destroy(),t!==n}))},n.update=function(t){Wn(this.sheet,t)&&this.proxy.emit(go.PaymentUpdate,null),this.formLoading&&q("SDK: Update sheet on form loading, type: Redirect",{source:this.source})},n.onClick=function(){var t=this;return Vn(Ee.SdkByTokenRequest),Vn(Ee.SdkByTokenRequestError),new Promise((function(e,n){var o=function(){q("SDK: Go to unknown url after buttonClick",{source:t.source})};window.addEventListener("beforeunload",o);var r=t.onPayButtonClick();Ae(r)||(r=Promise.resolve(r));var i=setTimeout((function(){V("SDK: onClick is awaiting for 10000ms",{source:t.source})}),1e4);setTimeout((function(){window.removeEventListener("beforeunload",o),n(new Error("Yandex.Pay: onPayButtonClick canceled by timeout"))}),3e4),r.catch((function(){Hn(Ee.SdkByTokenRequest),window.removeEventListener("beforeunload",o),n(new Pn("Yandex.Pay: onPayButtonClick Promise was rejected"))})).then((function(t){if(!t||"string"!=typeof t)throw new Error("Yandex.Pay: onPayButtonClick must return a Payment URL as a string");Hn(Ee.SdkByTokenRequest),window.removeEventListener("beforeunload",o),e(t)})).catch((function(t){Hn(Ee.SdkByTokenRequestError),window.removeEventListener("beforeunload",o),n(t)})).finally((function(){clearTimeout(i)}))}))},n.checkout=function(){var t=this;this.checkoutCounter+=1,this.formLoading=!0,this.proxy.emit(go.PaymentLock,null),this.onClick().then((function(e){var n=ko.getInstance();n.once(go.SdkCheckPaymentResponse,(function(e){var o=e.fullPaymentUrl;if(!o)return Ao.sdk.buttonCheckoutError(t.proxy.signalData),q("SDK CheckPayment: Incorrect payment params",{source:t.source}),t.emitError(new Error("Yandex.Pay: Incorrect payment params")),void t.onCheckoutError();var r=n.paymentReady.get(t.sessionId);if(!1===r)return Ao.sdk.buttonCheckoutError(t.proxy.signalData),t.proxy.emit(go.PaymentError,null),void V("SDK: Payment is forbidden by payment ready check",{source:t.source});null==r&&V("SDK: Check payment ready result is missing");var i=function(t,e,n){void 0===n&&(n={});var o=t,r=Un(e,n),i=J(t),a=J(de);return n.env!==$e.Sandbox&&(o=t.replace(i,a)),tt(o,r)}(o,t.sessionId,{checkoutCounter:t.checkoutCounter,env:t.env,extra:Dr(t.proxy),duid:Go("_ym_uid",void 0),merchantId:un(t.sheet)});ai.reachGoal(gn(t.sheet)?"ym-begin-yasplit":"ym-begin-yapay"),Ao.sdk.buttonCheckout(t.proxy.signalData),setTimeout((function(){var t;t=i,window.top&&(window.top.location.href=t)}),500)})),n.sendMessage({type:go.CheckPayment,env:t.env,paymentUrl:e,merchantId:un(t.sheet)})})).catch((function(e){e instanceof Pn?(Ao.sdk.buttonCheckoutAbort(t.proxy.signalData),V("SDK: Merchant error",e)):(Ao.sdk.buttonCheckoutError(t.proxy.signalData),q("SDK: PaymentV4 checkout error",{error:e,source:t.source}),t.emitError(e)),t.onCheckoutError()}))},n.destroy=function(){this.sheet=void 0,this.buttons.forEach((function(t){return t.button.destroy()})),this.buttons=[],this.widgets.forEach((function(t){return t.widget.destroy()})),this.widgets=[]},n.emitError=function(t){console.error(t.message),this.onFormOpenError&&this.onFormOpenError(t.message)},n.onCheckoutError=function(){var t=this;this.proxy.emit(go.PaymentError,null),setTimeout((function(){t.proxy.emit(go.PaymentUnlock,null)}),3e3),this.formLoading=!1},e}();var Fs,Ns,Ks=function(){function t(t,e,n){this.paymentData=t,this.options=e,this.payment=void 0;var o=e.onAbort,r=e.onError,i=e.onProcess,a=e.onSuccess,s=e.onPayButtonClick,u=e.onWidgetCheckoutClick,c=e.onFormOpenError,d=e.source;this.payment=function(t,e,n){var o=Tn(t);return o===Ye.ByToken?new js(t,e,n):[Ye.Payment,Ye.Checkout].includes(o)?new Ha(t,e):new Ls(t,e)}(t,n,{onPayButtonClick:s,onWidgetCheckoutClick:u,onFormOpenError:c,source:d}),this.payment instanceof js||(o&&this.payment.on(yo.Abort,(function(t){o(t)})),r&&this.payment.on(yo.Error,(function(t){r(t)})),i&&this.payment.on(yo.Process,(function(t){i(t)})),a&&this.payment.on(yo.Success,(function(t){a(t)})))}var e=t.prototype;return e.mountButton=function(t,e){return this.payment.mountButton(t,e)},e.mountSubmitButton=function(t,e){return this.payment.mountSubmitButton(t,e)},e.unmountButton=function(t){return this.payment.unmountButton(t)},e.mountWidget=function(t,e){return this.payment.mountWidget(t,Object.assign({},e,{buttonType:(n=this.paymentData,[Ye.Payment,Ye.Token].includes(n.type)?zt.Pay:[Ye.Checkout,Ye.CheckoutOld].includes(n.type)?zt.Checkout:zt.Simple)}));var n},e.unmountWidget=function(t){return this.payment.unmountWidget(t)},e.update=function(t){var e=this;if(_e(t)){var n=t();Ae(n)?(this.payment.__proxy().emit(go.PaymentLock,null),n.then((function(t){return e.payment.update(t)})).finally((function(){return e.payment.__proxy().emit(go.PaymentUnlock,null)}))):this.payment.update(n)}else console.warn("Yandex Pay SDK: paymentSession.update requires a function as an argument.")},e.destroy=function(){return po.unbindFromSession(this.payment.sessionId),this.payment.destroy()},t}(),zs=[],qs=window.requestAnimationFrame||setTimeout,Vs=function(){for(Fs=!0,Ns=!1;zs.length;){var t=zs.shift();null==t||t()}Fs=!1},Hs=function(t){return ts((function(e,n){return e.length>=t?n.nextValid(e):n.left({expected:"minStringLength",got:e,args:[t]})}))},Ys=ts((function(t,e){return null===t?e.right(null):e.nextNotValid({expected:"nullable",got:t})}),(function(){return"null"})),$s=["s","m","l"],Gs=["dark","light"],Js=ps({type:rs(["bnpl","cashback","ultimate"])(),amount:ys(),align:ns(rs(["left","center","right"],fs,"left"),as),"merchant-id":ns(es,Hs(1)),source:ns(es,as,Ys)})(),Qs=ps({type:rs(["bnpl"])(),amount:ys(),"merchant-id":ns(es,Hs(1)),size:ns(rs($s,fs,"l"),as),theme:ns(rs(Gs,fs,"light"),as),currency:ns(rs(["RUB"],hs,"RUB"),as),color:ns(rs(["primary","green","grey","transparent"],fs,"primary"),as),variant:ns(rs(["simple","detailed"],fs,"detailed"),as)})(),Zs=ps({type:rs(["cashback"])(),amount:ys(),"merchant-id":ns(es,Hs(1)),size:ns(rs($s,fs,"l"),as),theme:ns(rs(Gs,fs,"light"),as),currency:ns(rs(["RUB"],hs,"RUB"),as),color:ns(rs(["primary","grey","transparent"],fs,"primary"),as),variant:ns(rs(["default","compact"],fs,"default"),as)})(),Xs=ps({type:rs(["ultimate"])(),amount:ys(),"merchant-id":ns(es,Hs(1)),size:ns(rs($s,fs,"l"),as),theme:ns(rs(Gs,fs,"light"),as),currency:ns(rs(["RUB"],hs,"RUB"),as),variant:ns(rs(["default","compact"],fs,"default"),as)})(),tu=Za(Js),eu=Za(Qs),nu=Za(Zs),ou=Za(Xs),ru=function(t,e){try{return e(t)}catch(t){var n=t.message||t;throw"description"in t&&t.description&&(n="Badge validation failed with errors: "+JSON.stringify(t.description)),new Error(n)}};function iu(t){return ru(t,tu),"bnpl"===t.type?ru(t,eu):"ultimate"===t.type?ru(t,ou):ru(t,nu)}var au={l:24,m:18,s:14},su=au.l=24,uu="image",cu="variables",du=["type","amount","merchant-id","size","currency","color","variant","theme","align","source"],lu=["size"],hu=["type","size","variant"],fu="split006",mu=function(t){var e="https://pay.yandex.ru/api/v2/badge",n={};n.type=t.type,n.amount=t.amount,n.currency=t.currency,n.merchant_id=t["merchant-id"];var o=new URLSearchParams(window.location.search).get("yadiscount");return n.ads_discount=JSON.stringify({yadiscount:o||void 0,merchant_url:window.location.hostname}),t.source&&(n.source=t.source),"ultimate"===t.type?n.render_data=JSON.stringify({variant:t.variant,theme:t.theme,align:t.align}):n.render_data=JSON.stringify({color:t.color,variant:t.variant,theme:t.theme,align:t.align}),n.platform="web",window.__YAPAY_BADGE_SANDBOX&&(e=An(e)),tt(e,n)},pu=function(){var t=new WeakMap,e=function(t){return e=t,$s.includes(e)?t:"l";var e},n=new window.IntersectionObserver(or()(125,(function(t){t.forEach((function(t){var e,n=t.isIntersecting,o=t.target;n&&("badgeInternalId"in(e=o)&&"render"in e)&&o.render()}))})),{rootMargin:"250px 100px"});return function(o){function r(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=o.call.apply(o,[this].concat(i))||this).badgeInternalId=Nn("badge"),n.badgeId="no-bid",n.lastOptions=void 0,n.throwJs=!1,n.naturalWidth=void 0,n.getBadgeOptions=function(){var t=iu({type:n.getAttribute("type"),amount:n.getAttribute("amount"),"merchant-id":n.getAttribute("merchant-id"),size:n.getAttribute("size"),currency:n.getAttribute("currency"),color:n.getAttribute("color"),variant:n.getAttribute("variant"),theme:n.getAttribute("theme"),align:n.getAttribute("align"),source:n.getAttribute("source")});return n.lastOptions=t,t},n.updateSize=function(){var o=t.get(n),r=Nt.findNode("."+cu,o);if(r)try{var i=n.getBadgeOptions(),a=e(i.size),s=au[a],u="s"===a&&n.naturalWidth&&n.naturalWidth>=252?fu:void 0,c="variant"in i?i.variant:void 0,d=function(t,e,n){return"cashback"===t?"compact"===e?100/su:245/su:"ultimate"===t?"compact"===e?160/su:290/su:n===fu?"detailed"===e?310/su:252/su:"detailed"===e?310/su:195/su}(i.type,c,u);r.textContent="\n                        :host {\n                            height: "+s+"px;\n                            width: "+d*Number(s)+"px;\n                        }\n                    "}catch(t){V("SDK: Badge update size failed",t),console.error(t)}},n}U(r,o);var i=r.prototype;return i.connectedCallback=function(){var e,o=this;try{var r=this.getBadgeOptions();this.badgeId=function(t){return["b",t["merchant-id"],C(6),Date.now()].join(".")}(r)}catch(t){}try{if(!t.has(this)){var i=this.attachShadow({mode:"closed"}),a=document.createElement("style"),s=document.createElement("style");s.textContent="\n    :host {\n        display: inline-block;\n        overflow: hidden;\n        vertical-align: middle;\n        -webkit-tap-highlight-color: transparent;\n        line-height: 0;\n    }\n\n    .image {\n        height: 100%;\n        width: auto;\n        max-width: 100%;\n    }",a.className=cu,t.set(this,i),e=function(){i.appendChild(a),i.appendChild(s),o.updateSize()},Fs?e():(zs.push(e),Ns||(Ns=!0,qs(Vs)))}n.observe(this)}catch(t){q("Sdk: badge ShadowRoot already exists")}},i.disconnectedCallback=function(){},i.attributeChangedCallback=function(e){var n=t.get(this);n&&(hu.includes(e)&&this.updateSize(),!lu.includes(e)&&Nt.findNode("."+uu,n)&&this.render())},i.render=function(){var e=this,o=t.get(this);if(o)try{var r=this.getBadgeOptions(),i=Nt.findNode("."+uu,o);i||(i=document.createElement("img"),Nt.addClass(i,uu),i.height=su,i.width=1,Nt.on(i,"error",(function(){Nt.style(i,{display:"none"}),V("SDK: Badge image error",e.lastOptions)})),Nt.on(i,"load",(function(){i&&(e.naturalWidth=i.naturalWidth,e.updateSize()),Nt.style(i,{display:""})}))),Nt.style(i,{cursor:"default"}),Nt.attrs(i,{src:mu(r)}),Nt.add(o,i),n.unobserve(this)}catch(t){V("SDK: Badge render failed",t),console.error(t)}},_(r,null,[{key:"observedAttributes",get:function(){return du}}])}(Sn(HTMLElement))},yu=function(){try{return"undefined"!=typeof window}catch(t){return!1}}(),vu=n(296),gu=n.n(vu);var bu={getTabIcon:function(){return Promise.resolve("")}},wu=function(t){return!!t&&null!==t.match(/pay\.yandex\.ru\/sdk\/v1\/pay\.js:2:\d{1,20}([\\n]|.)?$/)};function ku(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Su(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Su(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Su(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Cu=function(){function t(t,e){this.buttonWatcher=void 0,this.criticalPoints=void 0,this.active=void 0,this.timings=void 0,this.buttonWatcher=t,this.criticalPoints=Array.from(e).sort(),this.active=new Map,this.timings=[]}var e=t.prototype;return e.start=function(){var t=this;this.buttonWatcher.on("change",(function(e){var n=e.mounted,o=e.unmounted;if(n&&n.length)for(var r,i=ku(n);!(r=i()).done;){var a=r.value;t.active.get(a)?V("Trying to log already mounted button"):t.active.set(a,performance.now())}if(o&&o.length)for(var s,u=ku(o);!(s=u()).done;){var c=s.value,d=t.active.get(c);d?(t.timings.push(performance.now()-d),t.active.delete(c)):V("Trying to log unmount on not mounted button")}}));var e=function(){t.send()};Nt.on(document,"beforeunload",e),Nt.on(document,"unload",e)},e.median=function(t){var e=t.length/2;return t.length%2==0?(t[e]+t[e-1])/2:t[Math.floor(e)]},e.calculate=function(){var t=Array.from(this.timings).sort(),e=t[0],n=t[t.length-1],o=t.reduce((function(t,e){return t+e}),0);return{timings:t,min:e,max:n,average:o/t.length,median:this.median(t)}},e.send=function(){for(var t,e,n=this.calculate(),o=this.buttonWatcher.values.map((function(t){return t.merchant.id})),r=Object.assign({},n,{merchants:(t=o,Array.from(new Set(t)))}),i=ku(this.criticalPoints);!(e=i()).done;){var a=e.value;if(r.min<a){H("Merchant placed button for less than "+a+"ms",r);break}}},t}(),xu=new Cu(xr,[500,1e3,2e3]),Pu=["merchantId"];var Mu,Eu,Iu,Bu={},Ou={},Tu=function(t){var e=Z(t.name);if(J(t.name)===Iu){var n=Q(t.name);Bu[n]&&Mu(Bu[n],t,t.name)}Ou[e]&&Mu(Ou[e],t,t.name)};var Ru={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137};function Wu(t,e){l("690.2096.2044",Object.assign({1701:t},v(),function(t){var e={};return Object.entries(Ru).forEach((function(n){var o=n[0],r=n[1];if(o in t){var i=t[o];"string"!=typeof i&&"number"!=typeof i||!i&&0!==i||(e[r]=Kn(i))}})),e}(e)),g())}var _u=new URL(ue).origin,Au=[{rumId:"script--sdk",payPath:"/sdk/v1/pay.js"},{rumId:"frame--init",payPath:Q(le)},{rumId:"assets--button-ru-white",payPath:String(sr)},{rumId:"assets--button-en-white",payPath:String(ar)},{rumId:"assets--button-ru-black",payPath:String(ir)},{rumId:"assets--button-en-black",payPath:String(rr)}];var Uu,Lu,Du,ju,Fu,Nu=function(t){return t.Coupon="COUPON",t}({});Uu={reqid:Oe,url:Pe,env:Me,page:"sdk",version:"155"},y(Object.assign({},r(Uu),{initTimestamp:Date.now()})),E.hit(),window.addEventListener("error",(function(t){var e,n;wu(null===(e=t.error)||void 0===e?void 0:e.stack)&&q("SDK: unhandled error",{error:t.error,message:t.message,stack:null===(n=t.error)||void 0===n?void 0:n.stack})})),window.addEventListener("unhandledrejection",(function(t){var e,n;wu(null===(e=t.reason)||void 0===e?void 0:e.stack)&&q("SDK: unhandledrejection error",{reason:t.reason,stack:null===(n=t.reason)||void 0===n?void 0:n.stack})})),window.YaPay||(Du=(Lu={baseOrigin:_u,filter:Au,sendTimingInstance:Wu}).baseOrigin,ju=Lu.filter,Fu=Lu.sendTimingInstance,ju.forEach((function(t){var e=t.rumId,n=t.payPath,o=t.url;n&&(Bu[n]=e);var r=Z(null!=o?o:"");r&&(Bu[r]=e)})),Eu||(Eu=new PerformanceObserver((function(t){t.getEntries().forEach(Tu)})),setTimeout((function(){Eu.observe({type:"resource",buffered:!0}),Eu.observe({type:"navigation",buffered:!0})}),0)),Mu||(Mu=Fu),Iu||(Iu=Du),Ao.init({env:Me,version:"155"}),O.then((function(t){var e=t.flags,n=t.testIds,o=t.boxes;Ao.update({experiments:e,testIds:n,boxes:o}),y({experiments:e,testIds:n,boxes:o})})),function(){if(yu){var t="IntersectionObserver"in window,e="attachShadow"in document.createElement("div"),n="customElements"in window,o="URLSearchParams"in window;t&&e&&n&&o?window.customElements.get(xe)||window.customElements.define(xe,pu()):H("SDK: Browser does not support required features for badges",{hasIntersectionObserver:t,hasShadowRoot:e,hasCustomElements:n,hasURLSearchParams:o})}else H("SDK: Badges can be inited in browser only")}(),l("690.1033",v(),g()),ko.getInstance(),H("SDK: Loaded",{sdkInFrame:So()}),window.crossOriginIsolated&&H("[COOP]: Cross origin isolated"),Er.start(),xu.start(),window.YaPay={createPayment:function(t){var e=po.primary.fork();e.mark(Yn.SessionCreationStarted),po.primary.mark(Yn.FirstSessionCreationStarted);var n=Os(t);Uo(n),In(n);var o=bn(n);e.bindBySession(o),y({sessionId:o,sheetEnv:n.env}),Lo(n);var r=!1;try{r=ko.getInstance().isReady}catch(t){V("SDK: Init frame readiness error",t)}return Ao.sdk.createSession(Object.assign({isFrameReady:r},Do(n),{sdkVariant:"createPayment",sessionId:o})),new Promise((function(t,r){try{var i=ko.getInstance(),a=function(t,e){if(on(t))return new Ha(t,e);if(En(t))return new Ws(t,e);if(an(t))throw new Error("createPayment does not support version 4");return new Ls(t,e)}(n,o);t(a),i.sendMessage({type:go.IsReadyToPay,env:n.env,merchantId:un(n),merchantUrl:sn(n),isCheckoutV2:En(n),paymentV3:Rn(n.type)}),i.once(go.SdkReady,(function(t){var e=t.isWebview&&So();i.paymentStart.get(o)&&V("SDK: Payment started before init-frame was ready"),e&&t.readyToPay&&H("SDK: Webview in iframe",{fn:"createPayment"}),i.paymentReady.set(o,t.readyToPay&&!e)})),Rs.setPayment(a),e.mark(Yn.SessionCreated)}catch(t){q("SDK: createPayment error",t),r(t)}}))},createCheckout:function(t){var e=po.primary.fork();e.mark(Yn.SessionCreationStarted),po.primary.mark(Yn.FirstSessionCreationStarted);var n=Os(t);Uo(n),In(n);var o=bn(n);e.bindBySession(o),y({sessionId:o,sheetEnv:n.env}),Lo(n);var r=!1;try{r=ko.getInstance().isReady}catch(t){V("SDK: Init frame readiness error",t)}return Ao.sdk.createSession(Object.assign({isFrameReady:r},Do(n),{sdkVariant:"createCheckout",sessionId:o})),new Promise((function(t,r){try{var i=ko.getInstance();t(new Ha(n,o)),i.sendMessage({type:go.IsReadyToPay,env:n.env,merchantId:n.merchantId,merchantUrl:sn(n),isCheckoutV2:!1,paymentV3:Rn(n.type)}),i.once(go.SdkReady,(function(t){var e,n,r=t.isWebview&&So();(null===(e=i.paymentStart)||void 0===e?void 0:e.get(o))&&V("SDK: Payment started before init-frame was ready"),r&&t.readyToPay&&H("SDK: Webview in iframe",{fn:"createCheckout"}),null===(n=i.paymentReady)||void 0===n||n.set(o,t.readyToPay&&!r)})),e.mark(Yn.SessionCreated)}catch(t){q("SDK: createCheckout error",t),r(t)}}))},createSession:function(t,e){void 0===e&&(e={});var n=po.primary.fork();n.mark(Yn.SessionCreationStarted),po.primary.mark(Yn.FirstSessionCreationStarted);var o=Os(t);Uo(o),In(o);var r=bn(o);n.bindBySession(r),y({sessionId:r,sheetEnv:o.env}),Lo(o);var i=!1;try{i=ko.getInstance().isReady}catch(t){V("SDK: Init frame readiness error",t)}return Ao.sdk.createSession(Object.assign({isFrameReady:i},Do(o),{sdkVariant:"createSession",sessionId:r})),new Promise((function(t,i){try{var a=ko.getInstance();t(new Ks(o,e,r)),a.sendMessage({type:go.IsReadyToPay,env:o.env,merchantId:un(o),merchantUrl:sn(o),isCheckoutV2:!1,paymentV3:Rn(o.type)||(s=o.type,[Ye.ByToken].includes(s))}),a.once(go.SdkReady,(function(t){var e=t.isWebview&&So();a.paymentStart.get(r)&&V("SDK: Payment started before init-frame was ready"),e&&t.readyToPay&&H("SDK: Webview in iframe",{fn:"createSession"}),a.paymentReady.set(r,t.readyToPay&&!e)})),n.mark(Yn.SessionCreated)}catch(t){q("SDK: createSession error",t),i(t)}var s}))},readyToPayCheck:function(){return Promise.resolve(!0)},splitAvailableCheck:function(){return H("SDK: Deprecated split available check"),Promise.resolve(!0)},checkSplitAvailable:function(t){return new Promise((function(e){ko.getInstance().sendMessage(Object.assign({type:go.SdkIsSplitAvailable},t)),ko.getInstance().on(go.SdkIsSplitAvailableResponse,(function(t){var n=t.splitAvailable;e(n)}))}))},mountBadge:function(e,n){try{if(!(e instanceof HTMLElement))throw new Error("The first argument should be an HTMLElement");var o=iu(function(e){var n=e.merchantId,o=t(e,Pu);return Object.assign({},o,{"merchant-id":n})}(n)),r=document.createElement(xe);r.throwJs=!0,Object.entries(o).forEach((function(t){var e=t[0],n=t[1];r.setAttribute(e,n)})),e.appendChild(r)}catch(t){V("SDK: mountBadge error",t),console.error(t)}},Button:Rs,Robokassa:bu,Env:$e,PaymentEnv:$e,CountryCode:Ge,CurrencyCode:Je,PaymentMethodType:Ze,OrderItemType:Qe,AllowedAuthMethod:Xe,AllowedCardNetwork:tn,CheckoutEventType:yo,PaymentEventType:yo,AbortEventReason:vo,ErrorEventReason:function(){var t={};try{return new Proxy(t,{get:function(t,e){var n=String(e);return H("Usage of YaPay.ErrorEventReason."+n),console.warn("Yandex Pay SDK: YaPay.ErrorEventReason is deprecated."),gu()(n).toUpperCase()}})}catch(e){return H("YaPay.ErrorEventReason fallback returned",e),t}}(),UpdateErrorCode:Nu,MessageType:bo,CompleteReason:wo,ButtonType:zt,ButtonTheme:qt,ButtonWidth:Vt,ButtonEventType:Ht,WidgetType:$t,WidgetTheme:Xt,WidgetPaddingType:Gt,RecurringType:en,WidgetBackgroundType:Qt,WidgetSize:Jt})})()})();